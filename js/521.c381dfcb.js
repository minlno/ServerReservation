"use strict";(self["webpackChunkserver_reservation"]=self["webpackChunkserver_reservation"]||[]).push([[521],{5521:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ie}});var o=n(641),s=n(3751),i=n(33);const a={class:"notices-page"},l={class:"announcements-section"},c={class:"section-header"},r={class:"filters-section"},u={class:"search-filter"},d={class:"category-filter"},m=["value"],h={key:0,class:"pinned-section"},g={class:"pinned-list"},p=["onClick"],k={class:"announcement-slim-content"},v={class:"announcement-title"},b={class:"announcement-category-slim"},L=["onClick"],w=["onClick"],C=["onClick"],y={class:"announcements-list"},A={key:0,class:"empty-state"},f={key:0},E={key:1},x={key:1},P=["onClick"],M={class:"announcement-slim-content"},D={class:"announcement-title"},B={class:"announcement-category-slim"},X=["onClick"],_=["onClick"],F=["onClick"],U={key:1,class:"pagination"},H=["disabled"],Q={class:"page-info"},S=["disabled"],T={class:"bug-reports-section"},V={key:0,class:"collapsible-content"},$={class:"section-header"},I={key:0,class:"admin-message"},W={class:"active-bugs"},R={key:0},N={key:1,class:"bug-list"},z={class:"bug-header"},j={class:"bug-checkbox-container"},K=["onUpdate:modelValue","onChange","disabled"],O={class:"bug-title"},q={class:"bug-tags"},J={key:0,class:"bug-page-tag"},Z={class:"bug-description"},G={class:"bug-meta"},Y={key:0,class:"bug-controls"},ee=["onClick"],te={class:"completed-bugs"},ne={key:0,class:"collapsible-content"},oe={key:0},se={key:1,class:"bug-list"},ie={class:"bug-header"},ae={class:"bug-checkbox-container"},le=["onUpdate:modelValue","onChange","disabled"],ce={class:"bug-title"},re={class:"bug-tags"},ue={key:0,class:"bug-page-tag"},de={class:"bug-description"},me={class:"bug-meta"},he={key:0,class:"bug-controls"},ge=["onClick"],pe={class:"modal-header"},ke={class:"modal-content"},ve={class:"form-group"},be={class:"form-group"},Le=["value"],we={class:"form-group"},Ce={class:"text-editor"},ye={class:"editor-toolbar"},Ae=["placeholder"],fe={class:"character-count"},Ee={class:"modal-actions"},xe={class:"modal-header"},Pe={class:"modal-content"},Me={class:"announcement-detail-category"},De={class:"category-badge"},Be=["innerHTML"],Xe={class:"announcement-detail-meta"},_e={key:0};function Fe(e,t,n,Fe,Ue,He){const Qe=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.bF)(Qe,{to:"/home",class:"home-icon-button",title:"Home"},{default:(0,o.k6)(()=>[...t[26]||(t[26]=[(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,o.Lk)("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,o.Lk)("polyline",{points:"9 22 9 12 15 12 15 22"})],-1)])]),_:1}),t[52]||(t[52]=(0,o.Lk)("h2",null,"Notices & Announcements",-1)),(0,o.Lk)("div",l,[(0,o.Lk)("div",c,[t[28]||(t[28]=(0,o.Lk)("h3",null,"Announcements",-1)),(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>Ue.showAnnouncementModal=!0),class:"post-announcement-btn"},[...t[27]||(t[27]=[(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,o.Lk)("path",{d:"M12 5v14"}),(0,o.Lk)("path",{d:"M5 12h14"})],-1),(0,o.eW)(" Post Announcement ",-1)])])]),(0,o.Lk)("div",r,[(0,o.Lk)("div",u,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>Ue.searchQuery=e),type:"text",placeholder:"Search announcements...",class:"search-input"},null,512),[[s.Jo,Ue.searchQuery]])]),(0,o.Lk)("div",d,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>Ue.selectedCategory=e),class:"category-select"},[t[29]||(t[29]=(0,o.Lk)("option",{value:""},"All Categories",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Ue.categories,e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,i.v_)(e),9,m))),128))],512),[[s.u1,Ue.selectedCategory]])]),Ue.searchQuery||Ue.selectedCategory?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[3]||(t[3]=(...e)=>He.clearFilters&&He.clearFilters(...e)),class:"clear-filters-btn"}," Clear Filters ")):(0,o.Q3)("",!0)]),Ue.pinnedAnnouncements.length>0?((0,o.uX)(),(0,o.CE)("div",h,[t[34]||(t[34]=(0,o.Lk)("h4",{class:"pinned-header"},[(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",class:"pin-icon"},[(0,o.Lk)("path",{d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"})]),(0,o.eW)(" Pinned Announcements ")],-1)),(0,o.Lk)("div",g,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Ue.pinnedAnnouncements,e=>((0,o.uX)(),(0,o.CE)("div",{key:"pinned-"+e.id,class:"announcement-item-slim pinned",onClick:t=>He.viewAnnouncement(e)},[t[33]||(t[33]=(0,o.Lk)("div",{class:"pinned-indicator"},[(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor"},[(0,o.Lk)("path",{d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"})])],-1)),(0,o.Lk)("div",k,[(0,o.Lk)("span",v,(0,i.v_)(e.title),1),(0,o.Lk)("span",b,(0,i.v_)(e.category),1)]),He.canManageAnnouncement(e)?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"announcement-actions",onClick:t[4]||(t[4]=(0,s.D$)(()=>{},["stop"]))},[(0,o.Lk)("button",{onClick:t=>He.editAnnouncement(e),class:"edit-btn",title:"Edit"},[...t[30]||(t[30]=[(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,o.Lk)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,o.Lk)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,L),(0,o.Lk)("button",{onClick:t=>He.togglePin(e),class:"pin-btn",title:"Unpin"},[...t[31]||(t[31]=[(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor"},[(0,o.Lk)("path",{d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"})],-1)])],8,w),(0,o.Lk)("button",{onClick:t=>He.deleteAnnouncement(e),class:"delete-btn",title:"Delete"},[...t[32]||(t[32]=[(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,o.Lk)("path",{d:"M3 6h18"}),(0,o.Lk)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,o.Lk)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})],-1)])],8,C)])):(0,o.Q3)("",!0)],8,p))),128))])])):(0,o.Q3)("",!0),(0,o.Lk)("div",y,[0===He.filteredAnnouncements.length?((0,o.uX)(),(0,o.CE)("div",A,[Ue.searchQuery||Ue.selectedCategory?((0,o.uX)(),(0,o.CE)("p",f,"No announcements match your filters.")):((0,o.uX)(),(0,o.CE)("p",E,"No announcements at this time."))])):((0,o.uX)(),(0,o.CE)("div",x,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(He.paginatedAnnouncements,e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"announcement-item-slim",onClick:t=>He.viewAnnouncement(e)},[(0,o.Lk)("div",M,[(0,o.Lk)("span",D,(0,i.v_)(e.title),1),(0,o.Lk)("span",B,(0,i.v_)(e.category),1)]),He.canManageAnnouncement(e)?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"announcement-actions",onClick:t[5]||(t[5]=(0,s.D$)(()=>{},["stop"]))},[(0,o.Lk)("button",{onClick:t=>He.editAnnouncement(e),class:"edit-btn",title:"Edit"},[...t[35]||(t[35]=[(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,o.Lk)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,o.Lk)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,X),He.isAdmin?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t=>He.togglePin(e),class:"pin-btn-outline",title:"Pin"},[...t[36]||(t[36]=[(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,o.Lk)("path",{d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"})],-1)])],8,_)):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t=>He.deleteAnnouncement(e),class:"delete-btn",title:"Delete"},[...t[37]||(t[37]=[(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,o.Lk)("path",{d:"M3 6h18"}),(0,o.Lk)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,o.Lk)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})],-1)])],8,F)])):(0,o.Q3)("",!0)],8,P))),128))]))]),He.totalPages>1?((0,o.uX)(),(0,o.CE)("div",U,[(0,o.Lk)("button",{onClick:t[6]||(t[6]=e=>Ue.currentPage=Math.max(1,Ue.currentPage-1)),disabled:1===Ue.currentPage,class:"page-btn"}," Previous ",8,H),(0,o.Lk)("span",Q,"Page "+(0,i.v_)(Ue.currentPage)+" of "+(0,i.v_)(He.totalPages),1),(0,o.Lk)("button",{onClick:t[7]||(t[7]=e=>Ue.currentPage=Math.min(He.totalPages,Ue.currentPage+1)),disabled:Ue.currentPage===He.totalPages,class:"page-btn"}," Next ",8,S)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",T,[(0,o.Lk)("div",{class:"collapsible-header",onClick:t[8]||(t[8]=e=>Ue.bugSectionExpanded=!Ue.bugSectionExpanded)},[t[38]||(t[38]=(0,o.Lk)("h3",null,"⚠ Bug Fix Tracking",-1)),(0,o.Lk)("span",{class:(0,i.C4)(["expand-icon",{expanded:Ue.bugSectionExpanded}])},"▼",2)]),Ue.bugSectionExpanded?((0,o.uX)(),(0,o.CE)("div",V,[(0,o.Lk)("div",$,[He.isAdmin?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("p",I,"Only administrators can update bug status"))]),(0,o.Lk)("div",W,[t[40]||(t[40]=(0,o.Lk)("h4",null,"Active Issues",-1)),0===He.activeBugs.length?((0,o.uX)(),(0,o.CE)("p",R,"No active bug reports.")):((0,o.uX)(),(0,o.CE)("div",N,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(He.activeBugs,e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"bug-item"},[(0,o.Lk)("div",z,[(0,o.Lk)("label",j,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t=>e.completed=t,onChange:t=>He.updateBugStatus(e),disabled:!He.isAdmin},null,40,K),[[s.lH,e.completed]]),(0,o.Lk)("span",O,(0,i.v_)(e.title),1)]),(0,o.Lk)("div",q,[(0,o.Lk)("span",{class:(0,i.C4)(["bug-priority","priority-"+e.priority])},(0,i.v_)(e.priority),3),e.page?((0,o.uX)(),(0,o.CE)("span",J,(0,i.v_)(e.page),1)):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",Z,(0,i.v_)(e.description),1),(0,o.Lk)("div",G,[(0,o.Lk)("span",null,"Reported by: "+(0,i.v_)(e.submittedBy),1),(0,o.Lk)("span",null,(0,i.v_)(He.formatDate(e.submittedAt)),1)]),He.isAdmin?((0,o.uX)(),(0,o.CE)("div",Y,[(0,o.Lk)("button",{onClick:t=>He.deleteBugReport(e),class:"delete-bug-btn"},[...t[39]||(t[39]=[(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,o.Lk)("path",{d:"M3 6h18"}),(0,o.Lk)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,o.Lk)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})],-1),(0,o.eW)(" Remove ",-1)])],8,ee)])):(0,o.Q3)("",!0)]))),128))]))]),(0,o.Lk)("div",te,[(0,o.Lk)("div",{class:"collapsible-header",onClick:t[9]||(t[9]=e=>Ue.completedBugsExpanded=!Ue.completedBugsExpanded)},[(0,o.Lk)("h4",null,"✓ Completed Fixes ("+(0,i.v_)(He.completedBugs.length)+")",1),(0,o.Lk)("span",{class:(0,i.C4)(["expand-icon",{expanded:Ue.completedBugsExpanded}])},"▼",2)]),Ue.completedBugsExpanded?((0,o.uX)(),(0,o.CE)("div",ne,[0===He.completedBugs.length?((0,o.uX)(),(0,o.CE)("p",oe,"No completed bug fixes.")):((0,o.uX)(),(0,o.CE)("div",se,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(He.completedBugs,e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"bug-item completed"},[(0,o.Lk)("div",ie,[(0,o.Lk)("label",ae,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t=>e.completed=t,onChange:t=>He.updateBugStatus(e),disabled:!He.isAdmin},null,40,le),[[s.lH,e.completed]]),(0,o.Lk)("span",ce,(0,i.v_)(e.title),1)]),(0,o.Lk)("div",re,[(0,o.Lk)("span",{class:(0,i.C4)(["bug-priority","priority-"+e.priority])},(0,i.v_)(e.priority),3),e.page?((0,o.uX)(),(0,o.CE)("span",ue,(0,i.v_)(e.page),1)):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",de,(0,i.v_)(e.description),1),(0,o.Lk)("div",me,[(0,o.Lk)("span",null,"Reported by: "+(0,i.v_)(e.submittedBy),1),(0,o.Lk)("span",null,(0,i.v_)(He.formatDate(e.submittedAt)),1)]),He.isAdmin?((0,o.uX)(),(0,o.CE)("div",he,[(0,o.Lk)("button",{onClick:t=>He.deleteBugReport(e),class:"delete-bug-btn"},[...t[41]||(t[41]=[(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,o.Lk)("path",{d:"M3 6h18"}),(0,o.Lk)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,o.Lk)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})],-1),(0,o.eW)(" Remove ",-1)])],8,ge)])):(0,o.Q3)("",!0)]))),128))]))])):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0)]),Ue.showAnnouncementModal?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"modal-overlay",onClick:t[22]||(t[22]=(...e)=>He.closeAnnouncementModal&&He.closeAnnouncementModal(...e))},[(0,o.Lk)("div",{class:"modal announcement-modal",onClick:t[21]||(t[21]=(0,s.D$)(()=>{},["stop"]))},[(0,o.Lk)("div",pe,[(0,o.Lk)("h3",null,(0,i.v_)(Ue.editingAnnouncement?"Edit Announcement":"Post New Announcement"),1),(0,o.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>He.closeAnnouncementModal&&He.closeAnnouncementModal(...e)),class:"close-button"},"×")]),(0,o.Lk)("div",ke,[(0,o.Lk)("div",ve,[t[42]||(t[42]=(0,o.Lk)("label",{for:"announcementTitle"},"Title *",-1)),(0,o.bo)((0,o.Lk)("input",{id:"announcementTitle","onUpdate:modelValue":t[11]||(t[11]=e=>Ue.announcementForm.title=e),type:"text",required:"",maxlength:"100",class:"form-input",placeholder:"Enter announcement title"},null,512),[[s.Jo,Ue.announcementForm.title]])]),(0,o.Lk)("div",be,[t[44]||(t[44]=(0,o.Lk)("label",{for:"announcementCategory"},"Category *",-1)),(0,o.bo)((0,o.Lk)("select",{id:"announcementCategory","onUpdate:modelValue":t[12]||(t[12]=e=>Ue.announcementForm.category=e),required:"",class:"form-select"},[t[43]||(t[43]=(0,o.Lk)("option",{value:""},"Select Category",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Ue.categories,e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,i.v_)(e),9,Le))),128))],512),[[s.u1,Ue.announcementForm.category]])]),(0,o.Lk)("div",we,[t[48]||(t[48]=(0,o.Lk)("label",{for:"announcementContent"},"Content *",-1)),(0,o.Lk)("div",Ce,[(0,o.Lk)("div",ye,[(0,o.Lk)("button",{type:"button",onClick:t[13]||(t[13]=e=>He.formatText("bold")),class:"editor-btn",title:"Bold"},[...t[45]||(t[45]=[(0,o.Lk)("strong",null,"B",-1)])]),(0,o.Lk)("button",{type:"button",onClick:t[14]||(t[14]=e=>He.formatText("italic")),class:"editor-btn",title:"Italic"},[...t[46]||(t[46]=[(0,o.Lk)("em",null,"I",-1)])]),(0,o.Lk)("button",{type:"button",onClick:t[15]||(t[15]=e=>He.formatText("underline")),class:"editor-btn",title:"Underline"},[...t[47]||(t[47]=[(0,o.Lk)("span",{style:{"text-decoration":"underline"}},"U",-1)])]),(0,o.Lk)("button",{type:"button",onClick:t[16]||(t[16]=e=>He.insertList()),class:"editor-btn",title:"Bullet List"}," • ")]),(0,o.Lk)("div",{ref:"contentEditor",contenteditable:"true",onInput:t[17]||(t[17]=(...e)=>He.updateContent&&He.updateContent(...e)),onPaste:t[18]||(t[18]=(...e)=>He.handlePaste&&He.handlePaste(...e)),class:"content-editor",placeholder:Ue.announcementForm.content?"":"Enter announcement content (max 1000 characters)"},null,40,Ae),(0,o.Lk)("div",fe,(0,i.v_)(He.getContentLength())+"/1000",1)])]),(0,o.Lk)("div",Ee,[(0,o.Lk)("button",{type:"button",onClick:t[19]||(t[19]=(...e)=>He.closeAnnouncementModal&&He.closeAnnouncementModal(...e)),class:"cancel-btn"},"Cancel"),(0,o.Lk)("button",{type:"button",onClick:t[20]||(t[20]=(...e)=>He.submitAnnouncement&&He.submitAnnouncement(...e)),class:"submit-btn"},(0,i.v_)(Ue.editingAnnouncement?"Update":"Post")+" Announcement ",1)])])])])):(0,o.Q3)("",!0),Ue.showAnnouncementDetail?((0,o.uX)(),(0,o.CE)("div",{key:1,class:"modal-overlay",onClick:t[25]||(t[25]=(...e)=>He.closeAnnouncementDetail&&He.closeAnnouncementDetail(...e))},[(0,o.Lk)("div",{class:"modal announcement-detail-modal",onClick:t[24]||(t[24]=(0,s.D$)(()=>{},["stop"]))},[(0,o.Lk)("div",xe,[(0,o.Lk)("h3",null,(0,i.v_)(Ue.viewingAnnouncement?.title),1),(0,o.Lk)("button",{onClick:t[23]||(t[23]=(...e)=>He.closeAnnouncementDetail&&He.closeAnnouncementDetail(...e)),class:"close-button"},"×")]),(0,o.Lk)("div",Pe,[(0,o.Lk)("div",Me,[(0,o.Lk)("span",De,(0,i.v_)(Ue.viewingAnnouncement?.category),1)]),(0,o.Lk)("div",{class:"announcement-detail-content",innerHTML:He.linkifyText(Ue.viewingAnnouncement?.content)},null,8,Be),(0,o.Lk)("div",Xe,[(0,o.Lk)("p",null,[t[49]||(t[49]=(0,o.Lk)("strong",null,"Author:",-1)),(0,o.eW)(" "+(0,i.v_)(Ue.viewingAnnouncement?.author),1)]),(0,o.Lk)("p",null,[t[50]||(t[50]=(0,o.Lk)("strong",null,"Posted:",-1)),(0,o.eW)(" "+(0,i.v_)(He.formatDate(Ue.viewingAnnouncement?.createdAt)),1)]),Ue.viewingAnnouncement?.updatedAt&&Ue.viewingAnnouncement?.updatedAt!==Ue.viewingAnnouncement?.createdAt?((0,o.uX)(),(0,o.CE)("p",_e,[t[51]||(t[51]=(0,o.Lk)("strong",null,"Last edited:",-1)),(0,o.eW)(" "+(0,i.v_)(He.formatDate(Ue.viewingAnnouncement?.updatedAt)),1)])):(0,o.Q3)("",!0)])])])])):(0,o.Q3)("",!0)])}n(8111),n(2489);var Ue=n(1560),He=n(1884),Qe=n(415),Se=n(9986),Te={name:"NoticesPage",data(){return{announcements:[],pinnedAnnouncements:[],searchQuery:"",selectedCategory:"",currentPage:1,itemsPerPage:10,bugs:[],bugSectionExpanded:!1,completedBugsExpanded:!1,showAnnouncementModal:!1,editingAnnouncement:null,showAnnouncementDetail:!1,viewingAnnouncement:null,announcementForm:{title:"",content:"",category:""},categories:["General","Maintenance","New Feature","System Update","Emergency","Tutorial","Policy"],currentUser:null,userRole:"guest"}},computed:{isAdmin(){return"admin"===this.userRole},currentUsername(){return this.currentUser?this.currentUser.email.split("@")[0]:""},filteredAnnouncements(){let e=this.announcements.filter(e=>!e.pinned);if(this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.content.toLowerCase().includes(t)||e.author.toLowerCase().includes(t))}return this.selectedCategory&&(e=e.filter(e=>e.category===this.selectedCategory)),e},paginatedAnnouncements(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredAnnouncements.slice(e,t)},totalPages(){return Math.ceil(this.filteredAnnouncements.length/this.itemsPerPage)},activeBugs(){return this.bugs.filter(e=>!e.completed)},completedBugs(){return this.bugs.filter(e=>e.completed)}},watch:{searchQuery(){this.currentPage=1},selectedCategory(){this.currentPage=1}},methods:{linkifyText(e){if(!e)return"";const t=/(https?:\/\/[^\s<]+)|(www\.[^\s<]+)/g;return e.replace(t,e=>{const t=e.startsWith("www.")?`https://${e}`:e;return`<a href="${t}" target="_blank" rel="noopener noreferrer" class="auto-link">${e}</a>`})},formatDate(e){if(!e)return"";const t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},clearFilters(){this.searchQuery="",this.selectedCategory="",this.currentPage=1},canManageAnnouncement(e){return this.isAdmin||e.authorEmail===this.currentUser?.email},async submitAnnouncement(){this.updateContent();const e=this.$refs.contentEditor?this.$refs.contentEditor.innerText.trim():"";if(this.announcementForm.title.trim()&&e&&this.announcementForm.category)if(e.length>1e3)alert("Content must be 1000 characters or less.");else if(this.currentUser&&this.currentUser.email)try{const e={title:this.announcementForm.title.trim(),content:this.announcementForm.content.trim(),category:this.announcementForm.category,author:this.currentUsername,authorEmail:this.currentUser.email,pinned:!1,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};this.editingAnnouncement?(e.createdAt=this.editingAnnouncement.createdAt,await(0,He.mZ)((0,He.H9)(Ue.kA,"announcements",this.editingAnnouncement.id),e)):await(0,He.gS)((0,He.rJ)(Ue.kA,"announcements"),e),await this.refreshAnnouncementCache(),this.showAnnouncementModal=!1,this.editingAnnouncement=null,this.announcementForm={title:"",content:"",category:""}}catch(t){console.error("Error saving announcement:",t),alert("Failed to save announcement: "+t.message)}else alert("Please log in to post announcements.");else alert("Please fill in all required fields.")},editAnnouncement(e){this.editingAnnouncement=e,this.announcementForm={title:e.title,content:e.content,category:e.category},this.showAnnouncementModal=!0,this.$nextTick(()=>{this.$refs.contentEditor&&(this.$refs.contentEditor.innerHTML=e.content)})},async deleteAnnouncement(e){if(confirm(`Are you sure you want to delete "${e.title}"?`))try{await(0,He.kd)((0,He.H9)(Ue.kA,"announcements",e.id)),await this.refreshAnnouncementCache()}catch(t){console.error("Error deleting announcement:",t),alert("Failed to delete announcement: "+t.message)}},async togglePin(e){try{await(0,He.mZ)((0,He.H9)(Ue.kA,"announcements",e.id),{pinned:!e.pinned,updatedAt:(new Date).toISOString()}),await this.refreshAnnouncementCache()}catch(t){console.error("Error toggling pin:",t),alert("Failed to update pin status: "+t.message)}},closeAnnouncementModal(){this.showAnnouncementModal=!1,this.editingAnnouncement=null,this.announcementForm={title:"",content:"",category:""}},viewAnnouncement(e){this.viewingAnnouncement=e,this.showAnnouncementDetail=!0},closeAnnouncementDetail(){this.showAnnouncementDetail=!1,this.viewingAnnouncement=null},formatText(e){document.execCommand(e,!1,null),this.$refs.contentEditor.focus()},insertList(){document.execCommand("insertUnorderedList",!1,null),this.$refs.contentEditor.focus()},updateContent(){this.announcementForm.content=this.$refs.contentEditor.innerHTML},getContentLength(){return this.$refs.contentEditor?this.$refs.contentEditor.innerText.length:0},handlePaste(e){e.preventDefault();const t=(e.clipboardData||window.clipboardData).getData("text/plain");document.execCommand("insertText",!1,t)},async updateBugStatus(e){if(this.isAdmin)try{await(0,He.mZ)((0,He.H9)(Ue.kA,"bugs",e.id),{completed:e.completed}),console.log("Bug status updated to "+(e.completed?"completed":"pending")),await this.refreshAnnouncementCache()}catch(t){console.error("Error updating bug status:",t),e.completed=!e.completed}else console.log("Non-admin attempted to update bug status")},async deleteBugReport(e){if(this.isAdmin){if(confirm(`Are you sure you want to delete the bug report: "${e.title}"?`))try{await(0,He.kd)((0,He.H9)(Ue.kA,"bugs",e.id)),console.log("Bug report deleted successfully"),await this.refreshAnnouncementCache()}catch(t){console.error("Error deleting bug report:",t),alert("Failed to delete bug report: "+t.message)}}else alert("You must be an administrator to remove bug reports.")},getPriorityWeight(e){const t={high:3,medium:2,low:1};return t[e]||0},loadData(){this.currentUser=Ue.j2.currentUser,this.loadAnnouncements(),this.loadBugs()},async loadAnnouncements(){try{const e=await Se._.loadData("announcements"),t=e.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)).slice(0,10);this.announcements=t.filter(e=>!e.pinned),this.pinnedAnnouncements=t.filter(e=>e.pinned),console.log("Loaded announcements:",t.length)}catch(e){console.error("Error loading announcements:",e),this.announcements=[],this.pinnedAnnouncements=[]}},async loadBugs(){try{const e=await Se._.loadData("bugs");this.bugs=e.sort((e,t)=>{if(e.completed!==t.completed)return e.completed?1:-1;const n=this.getPriorityWeight(e.priority),o=this.getPriorityWeight(t.priority);return n!==o?o-n:new Date(t.submittedAt)-new Date(e.submittedAt)}),console.log("Loaded bugs:",this.bugs.length)}catch(e){console.error("Error loading bugs:",e),this.bugs=[]}},async refreshAnnouncementCache(){try{const e=await Se._.refreshData("announcements"),t=await Se._.refreshData("bugs"),n=e.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)).slice(0,10);this.announcements=n.filter(e=>!e.pinned),this.pinnedAnnouncements=n.filter(e=>e.pinned),this.bugs=t.sort((e,t)=>{if(e.completed!==t.completed)return e.completed?1:-1;const n=this.getPriorityWeight(e.priority),o=this.getPriorityWeight(t.priority);return n!==o?o-n:new Date(t.submittedAt)-new Date(e.submittedAt)}),console.log("Cache refreshed - Announcements:",e.length,"Bugs:",t.length)}catch(e){console.error("Error refreshing cache:",e)}}},created(){this.loadData()},mounted(){this.authUnsubscribe=(0,Qe.hg)(Ue.j2,async e=>{if(this.currentUser=e,e){const e=await(0,Ue.uG)();this.userRole=e}else this.userRole="guest"})},beforeUnmount(){this.authUnsubscribe&&this.authUnsubscribe()}},Ve=n(6262);const $e=(0,Ve.A)(Te,[["render",Fe]]);var Ie=$e}}]);
//# sourceMappingURL=521.c381dfcb.js.map