{"version":3,"file":"js/791.1908df84.js","mappings":"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","sources":["webpack://server-reservation/./node_modules/core-js/modules/es.iterator.find.js","webpack://server-reservation/./src/views/ReservationCalendar.vue","webpack://server-reservation/./src/views/ReservationCalendar.vue?8f2f"],"sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar iteratorClose = require('../internals/iterator-close');\nvar iteratorHelperWithoutClosingOnEarlyError = require('../internals/iterator-helper-without-closing-on-early-error');\n\nvar findWithoutClosingOnEarlyError = iteratorHelperWithoutClosingOnEarlyError('find', TypeError);\n\n// `Iterator.prototype.find` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.find\n$({ target: 'Iterator', proto: true, real: true, forced: findWithoutClosingOnEarlyError }, {\n  find: function find(predicate) {\n    anObject(this);\n    try {\n      aCallable(predicate);\n    } catch (error) {\n      iteratorClose(this, 'throw', error);\n    }\n\n    if (findWithoutClosingOnEarlyError) return call(findWithoutClosingOnEarlyError, this, predicate);\n\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return iterate(record, function (value, stop) {\n      if (predicate(value, counter++)) return stop(value);\n    }, { IS_RECORD: true, INTERRUPTED: true }).result;\n  }\n});\n","<template>\n  <div class=\"reservation-calendar-container\">\n    <!-- Home icon button using common styles -->\n    <router-link to=\"/home\" class=\"home-icon-button\" title=\"Home\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n        <path d=\"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\"></path>\n        <polyline points=\"9 22 9 12 15 12 15 22\"></polyline>\n      </svg>\n    </router-link>\n    <div class=\"reservation-calendar\">\n      <!-- Server View -->\n      <div class=\"server-view\">\n        <!-- Week navigation (we can still do +/- 7 days, though we now start from \"today\" not Monday) -->\n        <div class=\"week-nav\">\n          <button @click=\"moveWeek(-1)\">&lt;</button>\n          <span class=\"week-range\">{{ formatWeekRange(weekStart) }}</span>\n          <button @click=\"moveWeek(1)\">&gt;</button>\n        </div>\n        \n        <!-- Consolidated filter container with unified search -->\n        <div class=\"filter-container\">\n          <div class=\"filter\">\n            <label for=\"unifiedFilter\">Filter:</label>\n            <input \n              id=\"unifiedFilter\"\n              v-model=\"unifiedFilter\" \n              placeholder=\"Server name, CPU type, or device name\" \n              class=\"filter-input\"\n            />\n            <!-- Add favorite toggle button -->\n            <button \n              v-if=\"currentUserEmail\"\n              @click=\"showOnlyFavorites = !showOnlyFavorites\" \n              class=\"favorite-filter-btn\"\n              :class=\"{ 'active': showOnlyFavorites }\"\n              :title=\"showOnlyFavorites ? 'Show all servers' : 'Show only favorites'\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"18\" height=\"18\">\n                <path :fill=\"showOnlyFavorites ? 'currentColor' : 'none'\" \n                      :stroke=\"showOnlyFavorites ? 'none' : 'currentColor'\"\n                      stroke-width=\"1.5\"\n                      d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"/>\n              </svg>\n            </button>\n            <button \n              v-if=\"unifiedFilter || showOnlyFavorites\" \n              class=\"clear-filter-btn\" \n              @click=\"clearAllFilters()\" \n              title=\"Clear filter\"\n            >\n              \n            </button>\n          </div>\n          <div class=\"filter-stats\" v-if=\"unifiedFilter || showOnlyFavorites\">\n            <div>Showing {{ filteredServers.length }} of {{ serversList.length }} servers</div>\n          </div>\n        </div>\n\n        <!-- Days container -->\n        <div class=\"days-container\">\n          <div\n            v-for=\"dayObj in serverWeekDays\"\n            :key=\"dayObj.date\"\n            class=\"day-section\"\n            :class=\"{ today: isSameDay(dayObj.date, new Date()) }\"\n          >\n            <!-- Day header with date and time axis -->\n            <div class=\"day-header\">\n              <div class=\"day-title\">{{ formatDayHeader(dayObj.date) }}</div>\n              <div class=\"day-time-axis\">\n                <div v-for=\"hour in axisTimes\" :key=\"hour\" class=\"axis-time\">\n                  {{ formatAxisHour(hour) }}\n                </div>\n              </div>\n            </div>\n\n            <div class=\"content-wrapper\">\n              <div class=\"server-labels\">\n                <div\n                  v-for=\"srv in filteredServers\"\n                  :key=\"srv.id\"\n                  class=\"server-label\"\n                  @click=\"showServerDetails(srv)\"\n                >\n                  <div class=\"server-label-content\">\n                    <span class=\"status-dot\" :class=\"getStatusColor(srv.status)\"></span>\n                    {{ srv.name }}\n                  </div>\n                </div>\n              </div>\n              <div class=\"timeline-container\">\n                <div\n                  v-if=\"isSameDay(dayObj.date, new Date())\"\n                  class=\"current-time-arrow\"\n                  :style=\"currentTimeArrowStyle(dayObj.date)\"\n                ></div>\n                <div\n                  class=\"timeline\"\n                  :style=\"{ height: filteredServers.length * rowHeight + 'px' }\"\n                  @mousedown=\"handleTimelineContainerMousedown(dayObj.date, $event)\"\n                  :data-day-index=\"index\"\n                >\n                  <!-- For each server row -->\n                  <div\n                    v-for=\"(srv, serverIndex) in filteredServers\"\n                    :key=\"srv.id\"\n                    class=\"reservation-row\"\n                    :style=\"{ top: (serverIndex * rowHeight) + 'px', height: rowHeight + 'px' }\"\n                    :data-server-id=\"srv.id\"\n                    :data-server-index=\"serverIndex\"\n                  >\n                    <div\n                      class=\"reservation-container\"\n                      @mousedown.stop=\"handleReservationContainerMousedown(srv, dayObj.date, $event)\"\n                      @dragover.prevent=\"handleDragOver($event, srv, dayObj.date)\"\n                      @drop=\"onDrop($event, srv, dayObj.date)\"\n                      :data-day-date=\"dayObj.date.toISOString()\"\n                      :data-server-name=\"srv.name\"\n                    >\n                      <!-- existing reservations -->\n                      <div\n                        v-for=\"res in getReservationsForServerAndDay(srv, dayObj.date)\"\n                        :key=\"res.id\"\n                        class=\"reservation\"\n                        :class=\"[getUrgencyColorClass(res.urgency), {'my-reservation': isMyReservation(res)}]\"\n                        :draggable=\"false\"\n                        @mousedown=\"startCustomDrag(res, srv, dayObj.date, $event)\"\n                        :style=\"getReservationStyle(res, dayObj.date)\"\n                      >\n                        <span class=\"reservation-title\">{{ res.username }}</span>\n                      </div>\n\n                      <!-- preview only if same day + server -->\n                      <div\n                        v-if=\"\n                          dragCreation.active &&\n                          isSameDay(dragCreation.day, dayObj.date) &&\n                          dragCreation.server === srv\n                        \"\n                        class=\"drag-preview\"\n                        :style=\"getDragPreviewStyle()\"\n                      ></div>\n\n                      <!-- Drag preview for dragged reservations -->\n                      <div\n                        v-if=\"draggedReservation && isDraggingOver(srv, dayObj.date)\"\n                        class=\"drag-grid-preview\"\n                        :style=\"getDragGridPreviewStyle()\"\n                      ></div>\n                    </div>\n                  </div>\n                  <!-- current time line overlay -->\n                  <div\n                    v-if=\"isSameDay(dayObj.date, new Date())\"\n                    class=\"current-time-line-timeline\"\n                    :style=\"currentTimeLineStyle(dayObj.date)\"\n                  ></div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"customDragActive\" class=\"custom-drag-preview\" :style=\"customDragPreviewStyle\"></div>\n  </div>\n  \n  <!-- Using common styles for the floating add button  -->\n  <button class=\"floating-add-button\" @click=\"openReservationForm\">+</button>\n  \n  <div v-if=\"showReservationForm\" class=\"app-modal-overlay\">\n    <div class=\"app-modal\">\n      <div class=\"app-modal-header\">\n        <h3>Create New Reservation</h3>\n      </div>\n      <div class=\"app-modal-content\">\n        <div class=\"app-form-group\">\n          <label for=\"server\">Server <span class=\"app-required-field\">*</span></label>\n          <select v-model=\"newReservation.server\" id=\"server\" required>\n            <option value=\"\" disabled>Select a server</option>\n            <option v-for=\"srv in sortedServersList\" :key=\"srv.id\" :value=\"srv.name\">{{ srv.name }}</option>\n          </select>\n        </div>\n        \n        <div class=\"app-form-group\">\n          <label for=\"urgency\">Urgency <span class=\"app-required-field\">*</span></label>\n          <select v-model=\"newReservation.urgency\" id=\"urgency\" required>\n            <option value=\"\" disabled>Select urgency level</option>\n            <option value=\"co-run\">Co-run</option>\n            <option value=\"exclusive\">Exclusive</option>\n            <option value=\"exclusive (urgent)\">Exclusive (Urgent)</option>\n            <option value=\"exclusive (may yield)\">Exclusive (May Yield)</option>\n          </select>\n        </div>\n        \n        <div class=\"app-form-group\">\n          <label for=\"username\">Username</label>\n          <input v-model=\"currentUsername\" id=\"username\" type=\"text\" disabled />\n        </div>\n        \n        <div class=\"app-form-group\">\n          <div class=\"date-time-row\">\n            <div class=\"date-time-group\">\n              <label for=\"startDate\">Start Date <span class=\"app-required-field\">*</span></label>\n              <select v-model=\"startDateInput\" id=\"startDate\" @change=\"validateTimes\">\n                <option v-for=\"choice in startDateChoices\" :key=\"choice.label\" :value=\"choice.label\">{{ choice.label }}</option>\n              </select>\n            </div>\n            <div class=\"date-time-group\">\n              <label for=\"startTime\">Start Time <span class=\"app-required-field\">*</span></label>\n              <select v-model=\"startTimeInput\" id=\"startTime\" @change=\"validateTimes\">\n                <option v-for=\"choice in startTimeChoices\" :key=\"choice\" :value=\"choice\">{{ choice }}</option>\n              </select>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"app-form-group\">\n          <div class=\"date-time-row\">\n            <div class=\"date-time-group\">\n              <label for=\"endDate\">End Date <span class=\"app-required-field\">*</span></label>\n              <select v-model=\"endDateInput\" id=\"endDate\" @change=\"validateTimes\">\n                <option v-for=\"choice in endDateChoices\" :key=\"choice.label\" :value=\"choice.label\">{{ choice.label }}</option>\n              </select>\n            </div>\n            <div class=\"date-time-group\">\n              <label for=\"endTime\">End Time <span class=\"app-required-field\">*</span></label>\n              <select v-model=\"endTimeInput\" id=\"endTime\" @change=\"validateTimes\">\n                <option v-for=\"choice in endTimeChoices\" :key=\"choice\" :value=\"choice\">{{ choice }}</option>\n              </select>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"app-form-group\">\n          <label for=\"note\">Note</label>\n          <textarea v-model=\"newReservation.note\" id=\"note\" placeholder=\"Add any additional information\"></textarea>\n        </div>\n      </div>\n      \n      <div class=\"app-modal-footer\">\n        <button @click=\"confirmReservation\" class=\"app-btn app-btn-primary\">Create</button>\n        <button @click=\"cancelReservation\" class=\"app-btn app-btn-secondary\">Cancel</button>\n      </div>\n    </div>\n  </div>\n\n  <div v-if=\"showEditModal\" class=\"app-modal-overlay\">\n    <div class=\"app-modal\">\n      <div class=\"app-modal-header\">\n        <h3>Edit Reservation</h3>\n      </div>\n      <div class=\"app-modal-content\">\n        <div class=\"app-form-group\">\n          <label for=\"server\">Server <span class=\"app-required-field\">*</span></label>\n          <select v-model=\"editingReservation.server\" id=\"server\">\n            <option v-for=\"srv in sortedServersList\" :key=\"srv.id\" :value=\"srv.name\">{{ srv.name }}</option>\n          </select>\n        </div>\n        \n        <div class=\"app-form-group\">\n          <label for=\"urgency\">Urgency <span class=\"app-required-field\">*</span></label>\n          <select v-model=\"editingReservation.urgency\" id=\"urgency\">\n            <option value=\"co-run\">Co-run</option>\n            <option value=\"exclusive\">Exclusive</option>\n            <option value=\"exclusive (urgent)\">Exclusive (Urgent)</option>\n            <option value=\"exclusive (may yield)\">Exclusive (May Yield)</option>\n          </select>\n        </div>\n        \n        <div class=\"app-form-group\">\n          <label for=\"username\">Username</label>\n          <input v-model=\"editingReservation.username\" id=\"username\" type=\"text\" disabled />\n        </div>\n        \n        <div class=\"app-form-group\">\n          <div class=\"date-time-row\">\n            <div class=\"date-time-group\">\n              <label for=\"editStartDate\">Start Date <span class=\"app-required-field\">*</span></label>\n              <select v-model=\"editingReservation.startDate\" id=\"editStartDate\" @change=\"validateEditTimes\">\n                <option v-for=\"choice in editStartDateChoices\" :key=\"choice.label\" :value=\"choice.label\">{{ choice.label }}</option>\n              </select>\n            </div>\n            <div class=\"date-time-group\">\n              <label for=\"editStartTime\">Start Time <span class=\"app-required-field\">*</span></label>\n              <select v-model=\"editingReservation.startTime\" id=\"editStartTime\" @change=\"validateEditTimes\">\n                <option v-for=\"choice in editStartTimeChoices\" :key=\"choice\" :value=\"choice\">{{ choice }}</option>\n              </select>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"app-form-group\">\n          <div class=\"date-time-row\">\n            <div class=\"date-time-group\">\n              <label for=\"editEndDate\">End Date <span class=\"app-required-field\">*</span></label>\n              <select v-model=\"editingReservation.endDate\" id=\"editEndDate\" @change=\"validateEditTimes\">\n                <option v-for=\"choice in editEndDateChoices\" :key=\"choice.label\" :value=\"choice.label\">{{ choice.label }}</option>\n              </select>\n            </div>\n            <div class=\"date-time-group\">\n              <label for=\"editEndTime\">End Time <span class=\"app-required-field\">*</span></label>\n              <select v-model=\"editingReservation.endTime\" id=\"editEndTime\" @change=\"validateEditTimes\">\n                <option v-for=\"choice in editEndTimeChoices\" :key=\"choice\" :value=\"choice\">{{ choice }}</option>\n              </select>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"app-form-group\">\n          <label for=\"note\">Note</label>\n          <textarea v-model=\"editingReservation.note\" id=\"note\" placeholder=\"Add any additional information\"></textarea>\n        </div>\n      </div>\n      \n      <div class=\"app-modal-footer\">\n        <button @click=\"confirmUpdate\" class=\"app-btn app-btn-primary\">Update</button>\n        <button @click=\"cancelEdit\" class=\"app-btn app-btn-secondary\">Cancel</button>\n        <button @click=\"confirmDelete(editingReservation)\" class=\"app-btn app-btn-danger\">Delete</button>\n      </div>\n    </div>\n  </div>\n\n  <!-- Reservation information modal -->\n  <div v-if=\"showViewModal\" class=\"app-modal-overlay\">\n    <div class=\"app-modal\">\n      <div class=\"app-modal-header\">\n        <h3>Reservation Information</h3>\n      </div>\n      <div class=\"app-modal-content\">\n        <div class=\"app-form-group\">\n          <label>Server</label>\n          <div class=\"info-display\">{{ viewingReservation.server }}</div>\n        </div>\n        \n        <div class=\"app-form-group\">\n          <label>Urgency</label>\n          <div class=\"info-display\">{{ viewingReservation.urgency }}</div>\n        </div>\n        \n        <div class=\"app-form-group\">\n          <label>Username</label>\n          <div class=\"info-display\">{{ viewingReservation.username }}</div>\n        </div>\n        \n        <div class=\"app-form-group\">\n          <label>Start</label>\n          <div class=\"info-display\">{{ viewingReservation.startDate }} {{ viewingReservation.startTime }}</div>\n        </div>\n        \n        <div class=\"app-form-group\">\n          <label>End</label>\n          <div class=\"info-display\">{{ viewingReservation.endDate }} {{ viewingReservation.endTime }}</div>\n        </div>\n        \n        <div class=\"app-form-group\" v-if=\"viewingReservation && viewingReservation.note\">\n          <label>Note</label>\n          <div class=\"info-display note\">{{ viewingReservation.note }}</div>\n        </div>\n      </div>\n      \n      <div class=\"app-modal-footer\">\n        <button @click=\"closeViewModal\" class=\"app-btn app-btn-secondary\">Close</button>\n      </div>\n    </div>\n  </div>\n\n  <!-- Server Details Modal -->\n  <div v-if=\"showServerDetailsModal\" class=\"app-modal-overlay\" @click.self=\"closeServerDetails\">\n    <div class=\"app-modal server-details-modal\">\n      <div class=\"app-modal-header\">\n        <h3>Server Details: {{ activeServer?.name }}</h3>\n      </div>\n      <div class=\"app-modal-content\">\n        <!-- Basic Server Information -->\n        <div class=\"section-divider\">Basic Information</div>\n        \n        <div class=\"app-form-group\">\n          <label>Name</label>\n          <div class=\"info-display\">{{ activeServer?.name }}</div>\n        </div>\n        \n        <div class=\"app-form-group\">\n          <label>CPU Type</label>\n          <div class=\"info-display\">{{ activeServer?.cpuType || 'N/A' }}</div>\n        </div>\n\n        <div class=\"app-form-group\">\n          <label>IP Address</label>\n          <div class=\"info-display\">{{ formatIp(activeServer?.ip) }}</div>\n        </div>\n        \n        <div class=\"app-form-group\">\n          <label>Owner</label>\n          <div class=\"info-display\">{{ activeServer?.owner || 'N/A' }}</div>\n        </div>\n        \n        <div class=\"app-form-group\">\n          <label>Status</label>\n          <div class=\"info-display\">\n            {{ formatStatus(activeServer?.status) }}\n          </div>\n        </div>\n        \n        <div class=\"app-form-group\" v-if=\"activeServer?.location\">\n          <label>Location</label>\n          <div class=\"info-display\">{{ activeServer.location }}</div>\n        </div>\n\n        <div class=\"app-form-group\" v-if=\"activeServer?.sudoUser\">\n          <label>Sudo Username</label>\n          <div class=\"info-display\">{{ activeServer.sudoUser }}</div>\n        </div>\n\n        <div class=\"app-form-group\" v-if=\"activeServer?.sudoUserPassword && hasViewPermissions()\">\n          <label>Sudo Password</label>\n          <div class=\"info-display password-field\">\n            {{ isPasswordVisible('sudo') ? activeServer.sudoUserPassword : '' }}\n            <button\n              class=\"toggle-password\"\n              @click=\"togglePasswordVisibility('sudo')\"\n              :title=\"isPasswordVisible('sudo') ? 'Hide sudo password' : 'Show sudo password'\"\n            >\n              <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" stroke=\"currentColor\" fill=\"none\">\n                <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\n                <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        <div class=\"app-form-group\" v-if=\"activeServer?.bmcIp\">\n          <label>BMC IP</label>\n          <div class=\"info-display bmc-links-container\">\n            <a\n              v-for=\"(ip, index) in parseBmcIps(activeServer.bmcIp)\"\n              :key=\"index\"\n              :href=\"`https://${ip}`\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              class=\"bmc-link\"\n            >\n              {{ ip }}\n            </a>\n          </div>\n        </div>\n\n        <div class=\"app-form-group\" v-if=\"activeServer?.bmcUser\">\n          <label>BMC Username</label>\n          <div class=\"info-display\">{{ activeServer.bmcUser }}</div>\n        </div>\n\n        <div class=\"app-form-group\" v-if=\"activeServer?.bmcPassword && hasViewPermissions()\">\n          <label>BMC Password</label>\n          <div class=\"info-display password-field\">\n            {{ isPasswordVisible('bmc') ? activeServer.bmcPassword : '' }}\n            <button\n              class=\"toggle-password\"\n              @click=\"togglePasswordVisibility('bmc')\"\n              :title=\"isPasswordVisible('bmc') ? 'Hide BMC password' : 'Show BMC password'\"\n            >\n              <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\" stroke=\"currentColor\" fill=\"none\">\n                <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\n                <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        <div class=\"app-form-group\" v-if=\"activeServer?.ubuntuVersion\">\n          <label>Ubuntu Version</label>\n          <div class=\"info-display\">{{ activeServer.ubuntuVersion }}</div>\n        </div>\n\n        <!-- Attached Devices Section -->\n        <div v-if=\"serverAttachedDevices && serverAttachedDevices.length > 0\">\n          <div class=\"section-divider\">Attached Devices</div>\n          <div class=\"attached-devices-list\">\n            <div v-for=\"device in serverAttachedDevices\" :key=\"device.id\" class=\"attached-device\">\n              <div class=\"device-name\">{{ device.name }}</div>\n              <div class=\"device-type\">{{ device.type || 'Unknown' }}</div>\n            </div>\n          </div>\n        </div>\n        \n        <!-- System Specs -->\n        <div class=\"section-divider\">System Specifications</div>\n        \n        <div class=\"app-form-group\">\n          <label>CPU Frequency</label>\n          <div class=\"info-display\">{{ activeServer?.cpuFreq || 'N/A' }}</div>\n        </div>\n        \n        <div class=\"app-form-group\">\n          <label>Memory Slots</label>\n          <div class=\"info-display\">{{ activeServer?.memorySlots || 'N/A' }}</div>\n        </div>\n        \n        <div class=\"app-form-group\">\n          <label>DIMM Type</label>\n          <div class=\"info-display\">{{ activeServer?.dimmType || 'N/A' }}</div>\n        </div>\n        \n        <div class=\"app-form-group\">\n          <label>Number of DIMMs</label>\n          <div class=\"info-display\">{{ activeServer?.numDimms || 'N/A' }}</div>\n        </div>\n      </div>\n      \n      <div class=\"app-modal-footer\">\n        <button @click=\"reserveActiveServer\" class=\"app-btn app-btn-primary\">Reserve</button>\n        <button @click=\"closeServerDetails\" class=\"app-btn app-btn-secondary\">Close</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { firestore, getUserRole, auth, isAdmin, isUser } from '@/firebase'  // Added auth, isAdmin, isUser imports\nimport { collection, onSnapshot, updateDoc, deleteDoc, doc, query, where, orderBy, getDocs, runTransaction } from 'firebase/firestore'\nimport { dailyCache } from '@/utils/dailyCache'\nimport '@/assets/styles/common/modal-common.css' // Import common modal styles\nimport '@/assets/styles/common/common-ui.css' // Import common UI component styles\nimport '@/assets/styles/components/ReservationCalendar.css'\n\nexport default {\n  name: 'ReservationCalendar',\n  components: {},\n  data() {\n    return {\n      allReservations: [],\n      serversList: [],\n      reservationsCollection: null,\n      serverFilter: '',\n      weekStart: new Date(),\n      rowHeight: 35,\n      unsubscribeReservations: null,\n\n      showReservationForm: false,\n      newReservation: {\n        start: null,\n        end: null,\n        server: '',\n        urgency: '',\n        note: ''\n      },\n      startDateInput: '',\n      startTimeInput: '',\n      endDateInput: '',\n      endTimeInput: '',\n      startDateOffset: '',\n      startTimeOffset: '',\n      endDateOffset: '',\n      endTimeOffset: '',\n\n      showEditModal: false,\n      editingReservation: null,\n\n      showViewModal: false,\n      viewingReservation: null,\n\n      dragCreation: {\n        active: false,\n        server: null,\n        day: null,\n        startX: null,\n        currentX: null,\n        containerLeft: null,\n        containerWidth: null,\n        previewLeft: null,\n        previewWidth: null\n      },\n      draggedReservation: null,\n      draggedOriginalServer: null,\n      dragPreviewPosition: {\n        active: false,\n        server: null,\n        day: null,\n        left: null,\n        width: null,\n        serverIndex: null\n      },\n\n      customDragActive: false,\n      customDragReservation: null,\n      customDragStartServer: null,\n      customDragCurrentServer: null,\n      customDragDay: null,\n      customDragPreviewStyle: {},\n      customDragInitialOffset: 0,\n      customDragWidth: 0,\n      customDragInitialRect: null,\n      customDragStartTime: null,\n\n      isDragging: false,\n      dragStartX: 0,\n      dragStartY: 0,\n      dragThreshold: 5,\n      deviceFilter: '', // Add this new property for device filtering\n      unifiedFilter: '', // Replace serverFilter and deviceFilter with unified filter\n\n      // Add new properties for server details modal\n      showServerDetailsModal: false,\n      activeServer: null,\n      serverAttachedDevices: [],\n      showOnlyFavorites: false,\n      favoriteServers: new Set(), // Add Set to track favorite server IDs\n      userDocId: null, // Store the user document ID for updates\n      visiblePasswords: new Set(), // Track visible passwords in server details modal\n    }\n  },\n  computed: {\n    currentUserEmail() {\n      return auth.currentUser ? auth.currentUser.email : '';\n    },\n    currentUsername() {\n      if (!this.currentUserEmail) return '';\n      return this.currentUserEmail.split('@')[0];\n    },\n    // Updated to handle unified filtering and sort by name\n    filteredServers() {\n      let result = this.serversList;\n      \n      // First apply favorites filter if active\n      if (this.showOnlyFavorites) {\n        result = result.filter(server => this.isServerFavorite(server.id));\n      }\n      \n      // Then apply search filter if specified\n      if (this.unifiedFilter) {\n        const filter = this.unifiedFilter.toLowerCase();\n        \n        result = result.filter(server => {\n          // Filter by server name\n          if (server.name && server.name.toLowerCase().includes(filter)) {\n            return true;\n          }\n          \n          // Filter by CPU type\n          if (server.cpuType && server.cpuType.toLowerCase().includes(filter)) {\n            return true;\n          }\n          \n          // Filter by attached device name - FIX FOR DEVICE RESERVATION\n          // First check direct attachments on server\n          if (server.attachedDevices && server.attachedDevices.length && this.devicesList) {\n            if (server.attachedDevices.some(deviceId => {\n              const device = this.devicesList.find(d => d.id === deviceId);\n              return device && device.name && device.name.toLowerCase().includes(filter);\n            })) {\n              return true;\n            }\n          }\n          \n          // Also check if any device with this name has this server in attachedServer\n          if (this.devicesList && this.devicesList.length) {\n            if (this.devicesList.some(device => \n              device.name && \n              device.name.toLowerCase().includes(filter) && \n              device.attachedServer === server.id\n            )) {\n              return true;\n            }\n          }\n          \n          return false;\n        });\n      }\n      \n      // Filter out unavailable servers (status is not \"on\")\n      result = result.filter(server => server.status === 'on');\n      \n      // Sort by CPU type group first, then by name alphabetically\n      return result.sort((a, b) => {\n        // Get CPU type group indices (lower index = higher priority)\n        const groupA = this.getCpuTypeGroupIndex(a.cpuType);\n        const groupB = this.getCpuTypeGroupIndex(b.cpuType);\n        \n        // If different groups, sort by group\n        if (groupA !== groupB) {\n          return groupA - groupB;\n        }\n        \n        // If same group, sort alphabetically by name\n        const nameA = (a.name || '').toLowerCase();\n        const nameB = (b.name || '').toLowerCase();\n        return nameA.localeCompare(nameB);\n      });\n    },\n\n    // Sorted server list for dropdowns (same ordering as ServerList.vue)\n    sortedServersList() {\n      return [...this.serversList].sort((a, b) => {\n        // Get CPU type group indices (lower index = higher priority)\n        const groupA = this.getCpuTypeGroupIndex(a.cpuType);\n        const groupB = this.getCpuTypeGroupIndex(b.cpuType);\n\n        // If different groups, sort by group\n        if (groupA !== groupB) {\n          return groupA - groupB;\n        }\n\n        // If same group, sort alphabetically by name\n        const nameA = (a.name || '').toLowerCase();\n        const nameB = (b.name || '').toLowerCase();\n        return nameA.localeCompare(nameB);\n      });\n    },\n\n    serverWeekDays() {\n      const days = []\n      for (let i = 0; i < 7; i++) {\n        const d = new Date(this.weekStart)\n        d.setDate(d.getDate() + i)\n        days.push({ date: d })\n      }\n      return days\n    },\n    axisTimes() {\n      return Array.from({ length: 24 }, (_, i) => i)\n    },\n    startDateChoices() {\n      return this.genDateChoices(this.startDateInput)\n    },\n    endDateChoices(){\n      return this.genDateChoices(this.endDateInput)\n    },\n    startTimeChoices() {\n      const st = this.parseDateTime(this.startDateInput, this.startTimeInput);\n      const en = this.parseDateTime(this.endDateInput, this.endTimeInput);\n      if (!st || !en) return [];\n      const arr = [];\n      let cur = new Date(st.getTime() - 3 * 3600000);\n      while (cur <= en) {\n        const label = this.formatHhMmAmPm(cur);\n        arr.push(label);\n        cur = new Date(cur.getTime() + 30 * 60000);\n      }\n      return arr;\n    },\n    endTimeChoices(){\n      const st = this.parseDateTime(this.startDateInput, this.startTimeInput);\n      const en = this.parseDateTime(this.endDateInput, this.endTimeInput);\n      if (!st || !en) return [];\n      const arr = [];\n      let cur = new Date(st.getTime());\n      const endRange = new Date(en.getTime() + 3 * 3600000);\n      while (cur <= endRange) {\n        const label = this.formatHhMmAmPm(cur);\n        arr.push(label);\n        cur = new Date(cur.getTime() + 30 * 60000);\n      }\n      return arr;\n    },\n    editStartDateChoices() {\n      return this.editingReservation ? this.genDateChoices(this.editingReservation.startDate) : [];\n    },\n    editEndDateChoices() {\n      return this.editingReservation ? this.genDateChoices(this.editingReservation.endDate) : [];\n    },\n    editStartTimeChoices() {\n      if (!this.editingReservation) return [];\n      \n      const st = this.parseDateTime(this.editingReservation.startDate, this.editingReservation.startTime);\n      const en = this.parseDateTime(this.editingReservation.endDate, this.editingReservation.endTime);\n      if (!st || !en) return [];\n      \n      const arr = [];\n      let cur = new Date(st.getTime() - 3 * 3600000);\n      while (cur <= en) {\n        const label = this.formatHhMmAmPm(cur);\n        arr.push(label);\n        cur = new Date(cur.getTime() + 30 * 60000);\n      }\n      return arr;\n    },\n    editEndTimeChoices() {\n      if (!this.editingReservation) return [];\n      \n      const st = this.parseDateTime(this.editingReservation.startDate, this.editingReservation.startTime);\n      const en = this.parseDateTime(this.editingReservation.endDate, this.editingReservation.endTime);\n      if (!st || !en) return [];\n      \n      const arr = [];\n      let cur = new Date(st.getTime());\n      const endRange = new Date(en.getTime() + 3 * 3600000);\n      while (cur <= endRange) {\n        const label = this.formatHhMmAmPm(cur);\n        arr.push(label);\n        cur = new Date(cur.getTime() + 30 * 60000);\n      }\n      return arr;\n    },\n    // Check if server has additional properties to display\n    hasAdditionalProperties() {\n      return this.activeServer && Object.keys(this.getAdditionalFields(this.activeServer)).length > 0;\n    }\n  },\n  methods: {\n    // Efficient Firebase-based conflict check\n    async checkConflictEfficient(serverName, newStart, newEnd, newUrgency, excludeId = null) {\n      try {\n        // Query only reservations for the specific server that might overlap\n        const conflictQuery = query(\n          this.reservationsCollection,\n          where('server', '==', serverName),\n          where('start', '<', newEnd.toISOString()),\n          orderBy('start', 'asc')\n        );\n\n        const snapshot = await getDocs(conflictQuery);\n        const potentialConflicts = snapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n\n        console.log(`Checking conflicts for ${serverName}: found ${potentialConflicts.length} potential conflicts`);\n\n        for (const ev of potentialConflicts) {\n          // Skip if this is the same reservation we're editing\n          if (excludeId && ev.id === excludeId) continue;\n\n          const evStart = new Date(ev.start);\n          const evEnd = new Date(ev.end);\n\n          // Check for actual time overlap\n          if (newStart < evEnd && newEnd > evStart) {\n            const existingUrg = (ev.urgency || '').toLowerCase();\n            const newUrg = (newUrgency || '').toLowerCase();\n\n            // Both must be co-run to allow overlap\n            if (existingUrg !== 'co-run' || newUrg !== 'co-run') {\n              console.log(`Conflict found: ${ev.username} (${ev.urgency}) vs new (${newUrgency})`);\n              return true;\n            }\n          }\n        }\n        \n        console.log('No conflicts found');\n        return false;\n      } catch (error) {\n        console.error('Error checking conflicts:', error);\n        // Fallback to memory-based check\n        return this.checkConflictMemory(serverName, newStart, newEnd, newUrgency, excludeId);\n      }\n    },\n\n    // Fallback memory-based conflict check\n    checkConflictMemory(serverName, newStart, newEnd, newUrgency, excludeId = null) {\n      const sameServerEvents = this.allReservations.filter(ev => \n        ev.server === serverName && (excludeId === null || ev.id !== excludeId)\n      );\n\n      for (const ev of sameServerEvents) {\n        const evStart = new Date(ev.start);\n        const evEnd = new Date(ev.end);\n\n        if (newStart < evEnd && newEnd > evStart) {\n          const existingUrg = (ev.urgency || '').toLowerCase();\n          const newUrg = (newUrgency || '').toLowerCase();\n\n          if (existingUrg !== 'co-run' || newUrg !== 'co-run') {\n            return true;\n          }\n        }\n      }\n      return false;\n    },\n    \n    // Transaction-based safe reservation creation\n    async createReservationSafe(reservationData) {\n      try {\n        return await runTransaction(firestore, async (transaction) => {\n          // Query for conflicting reservations within transaction\n          const conflictQuery = query(\n            this.reservationsCollection,\n            where('server', '==', reservationData.server),\n            where('start', '<', reservationData.end),\n            orderBy('start', 'asc')\n          );\n\n          const conflictSnapshot = await getDocs(conflictQuery);\n          const conflicts = conflictSnapshot.docs.map(doc => ({\n            id: doc.id,\n            ...doc.data()\n          }));\n\n          // Check for conflicts\n          const newStart = new Date(reservationData.start);\n          const newEnd = new Date(reservationData.end);\n          const newUrgency = (reservationData.urgency || '').toLowerCase();\n\n          for (const conflict of conflicts) {\n            const conflictStart = new Date(conflict.start);\n            const conflictEnd = new Date(conflict.end);\n\n            // Check for time overlap\n            if (newStart < conflictEnd && newEnd > conflictStart) {\n              const conflictUrgency = (conflict.urgency || '').toLowerCase();\n\n              // Both must be co-run to allow overlap\n              if (conflictUrgency !== 'co-run' || newUrgency !== 'co-run') {\n                throw new Error(`Conflict with reservation by ${conflict.username} (${conflict.urgency})`);\n              }\n            }\n          }\n\n          // If no conflicts, create the reservation\n          const newDocRef = doc(collection(firestore, 'reservations'));\n          transaction.set(newDocRef, reservationData);\n          \n          return newDocRef.id;\n        });\n      } catch (error) {\n        console.error('Transaction failed:', error);\n        throw error;\n      }\n    },\n    \n    // ISO date string conversion with timezone offset\n    toLocalOffsetISOString(date) {\n      const offsetMin = date.getTimezoneOffset()\n      const sign = offsetMin > 0 ? '-' : '+'\n      const absolute = Math.abs(offsetMin)\n      const offsetHours = Math.floor(absolute / 60)\n      const offsetMins = absolute % 60\n\n      const pad = (n) => n.toString().padStart(2, '0')\n      const year = date.getFullYear()\n      const month = pad(date.getMonth() + 1)\n      const day = pad(date.getDate())\n      const hour = pad(date.getHours())\n      const minute = pad(date.getMinutes())\n      const second = pad(date.getSeconds())\n      const offH = pad(offsetHours)\n      const offM = pad(offsetMins)\n      return `${year}-${month}-${day}T${hour}:${minute}:${second}${sign}${offH}:${offM}`\n    },\n\n    // Date and time formatting functions - consolidated\n    formatAxisHour(h) {\n      return new Date(2000, 0, 1, h).toLocaleTimeString('en-US', { hour: 'numeric', hour12: true });\n    },\n    \n    formatMmmDdYyyy(d) {\n      return d.toLocaleDateString('en-US', {month:'short', day:'numeric', year:'numeric'});\n    },\n    \n    formatHhMmAmPm(d) {\n      return d.toLocaleTimeString('en-US', {hour:'numeric', minute:'2-digit', hour12:true});\n    },\n    \n    formatDayHeader(d) {\n      const weekday = d.toLocaleDateString('en-US', {weekday:'short'});\n      const monthDay = d.toLocaleDateString('en-US', {month:'short', day:'numeric'});\n      return `${weekday} (${monthDay})`;\n    },\n    \n    formatWeekRange(startDate) {\n      const endDate = this.addDays(startDate, 6);\n      const startMonth = startDate.toLocaleDateString('en-US', {month:'short'});\n      const endMonth = endDate.toLocaleDateString('en-US', {month:'short'});\n      const startDay = startDate.getDate();\n      const endDay = endDate.getDate();\n      const startYear = startDate.getFullYear();\n      const endYear = endDate.getFullYear();\n      \n      if (startMonth !== endMonth || startYear !== endYear) {\n        return `${startMonth} ${startDay}${startYear !== endYear ? `, ${startYear}:` : ''} - ${endMonth} ${endDay}, ${endYear}`;\n      }\n      return `${startMonth} ${startDay} - ${endDay}, ${startYear}`;\n    },\n\n    \n    // Combined time indicator style functions\n    getTimeIndicatorStyle(dayDate, type) {\n      const now = new Date();\n      if (!this.isSameDay(now, dayDate)) return {};\n      \n      const hours = now.getHours() + now.getMinutes() / 60;\n      const leftPercent = (hours / 24) * 100;\n      \n      if (type === 'arrow') {\n        return {\n          position: 'absolute',\n          top: '-10px',\n          left: `calc(${leftPercent}% - 2.5px)`,\n          width: '0',\n          height: '0',\n          borderLeft: '5px solid transparent',\n          borderRight: '5px solid transparent',\n          borderTop: '10px solid red'\n        };\n      } else if (type === 'line') {\n        return {\n          position: 'absolute',\n          top: '0',\n          bottom: '0',\n          left: `calc(${leftPercent}%)`,\n          width: '2px',\n          background: 'linear-gradient(to bottom, rgba(220, 53, 69, 0.8), rgba(220, 53, 69, 0.6))',\n          zIndex: 5,\n          boxShadow: '0 0 8px rgba(220, 53, 69, 0.4)'\n        };\n      }\n      \n      return {};\n    },\n    \n    // Use the combined function for both arrow and line\n    currentTimeArrowStyle(dayDate) {\n      return this.getTimeIndicatorStyle(dayDate, 'arrow');\n    },\n    \n    currentTimeLineStyle(dayDate) {\n      return this.getTimeIndicatorStyle(dayDate, 'line');\n    },\n    \n    // Date helper functions\n    addDays(dt, days) {\n      const d = new Date(dt);\n      d.setDate(d.getDate() + days);\n      return d;\n    },\n    \n    isSameDay(d1, d2) {\n      return d1.getFullYear() === d2.getFullYear() &&\n             d1.getMonth() === d2.getMonth() &&\n             d1.getDate() === d2.getDate();\n    },\n    \n    moveWeek(offset) {\n      const newDate = new Date(this.weekStart);\n      newDate.setDate(newDate.getDate() + offset * 7);\n      this.weekStart = newDate;\n      \n      // Reload reservations for the new week\n      this.reloadReservations();\n    },\n    \n    // Reload reservations when week changes\n    reloadReservations() {\n      // Unsubscribe from current listener\n      if (this.unsubscribeReservations) {\n        this.unsubscribeReservations();\n      }\n      \n      // Load reservations for new week\n      this.loadReservations();\n    },\n\n    // Hour and minute snapping functions - consolidated\n    snapHoursTo00_15_30_45(h) {\n      let totalMinutes = Math.round(h * 60);\n      const hour = Math.floor(totalMinutes / 60);\n      let minutes = totalMinutes % 60;\n      \n      // Snap minutes to 0 or 30\n      if (minutes >= 0 && minutes <= 25) minutes = 0;\n      else if (minutes > 25 && minutes <= 55) minutes = 30;\n      else minutes = 60;\n      \n      return hour + minutes / 60;\n    },\n\n    // Parse date and time strings into Date object\n    parseDateTime(dateS, timeS) {\n      try {\n        if (!dateS || !timeS) return null;\n        \n        const dateObj = new Date(dateS);\n        if (dateObj.toString() === 'Invalid Date') return null;\n\n        const timeParts = timeS.trim().split(' ');\n        if (timeParts.length !== 2) return null;\n        \n        const [time, period] = timeParts;\n        let [hours, minutes] = time.split(':').map(Number);\n        \n        if (isNaN(hours) || isNaN(minutes)) return null;\n        \n        const upperPeriod = period.toUpperCase();\n        if (upperPeriod === 'PM' && hours !== 12) hours += 12;\n        if (upperPeriod === 'AM' && hours === 12) hours = 0;\n        \n        dateObj.setHours(hours, minutes, 0, 0);\n        return dateObj;\n      } catch (err) {\n        console.error('Error parsing date/time:', err);\n        return null;\n      }\n    },\n\n    // Generate date choices for dropdowns\n    genDateChoices(inputStr) {\n      const base = this.parseDateTime(inputStr, '12:00 PM');\n      if (!base) return [];\n      \n      const arr = [];\n      for (const offset of [-2, -1, 0, 1, 2]) {\n        const dd = new Date(base);\n        dd.setDate(dd.getDate() + offset);\n        arr.push({\n          value: offset,\n          label: this.formatMmmDdYyyy(dd)\n        });\n      }\n      return arr;\n    },\n\n    // Combined validation function for both new and edit forms\n    validateDateTimes(startDateInput, startTimeInput, endDateInput, endTimeInput) {\n      const start = this.parseDateTime(startDateInput, startTimeInput);\n      const end = this.parseDateTime(endDateInput, endTimeInput);\n      \n      if (!start || !end) {\n        console.warn('Invalid date/time format');\n        return { valid: false, message: 'Invalid date/time format' };\n      }\n      \n      if (start >= end) {\n        return { valid: false, message: 'End time must be after start time' };\n      }\n      \n      return { valid: true, start, end };\n    },\n    \n    // Call the combined validation function\n    validateTimes() {\n      const result = this.validateDateTimes(\n        this.startDateInput,\n        this.startTimeInput, \n        this.endDateInput,\n        this.endTimeInput\n      );\n      \n      if (!result.valid && result.message) {\n        alert(result.message);\n      }\n    },\n    \n    validateEditTimes() {\n      if (!this.editingReservation) return;\n      \n      const result = this.validateDateTimes(\n        this.editingReservation.startDate,\n        this.editingReservation.startTime,\n        this.editingReservation.endDate,\n        this.editingReservation.endTime\n      );\n      \n      if (!result.valid && result.message) {\n        alert(result.message);\n      }\n      \n      this.$forceUpdate();\n    },\n\n    // Consolidated reservation update function\n    async updateReservation(evt, directUpdate = false) {\n      // Skip if not a direct update\n      if (!directUpdate) return false;\n      \n      const start = new Date(evt.start);\n      const end = new Date(evt.end);\n      \n      // Check for conflicts\n      if (await this.checkConflictEfficient(evt.server, start, end, evt.urgency, evt.id)) {\n        alert('Conflict: overlapping on the same server, not all open to co-run.');\n        return false;\n      }\n      \n      // Update in database\n      const docRef = doc(firestore, 'reservations', evt.id);\n      try {\n        const updateData = {\n          title: evt.title,\n          server: evt.server,\n          start: this.toLocalOffsetISOString(start),\n          end: this.toLocalOffsetISOString(end)\n        };\n        \n        // Add additional fields if provided\n        if (evt.urgency !== undefined) updateData.urgency = evt.urgency;\n        if (evt.note !== undefined) updateData.note = evt.note;\n        \n        await updateDoc(docRef, updateData);\n        console.log('Updated reservation');\n        return true;\n      } catch (error) {\n        console.error('Error updating reservation:', error);\n        return false;\n      }\n    },\n\n    // Use the combined update function for silent updates too\n    updateReservationSilent(evt) {\n      return this.updateReservation(evt, true);\n    },\n\n    // Handling for both new and existing reservations\n    async saveReservation(isNew = true) {\n      const reservationData = isNew ? this.newReservation : this.editingReservation;\n      \n      // Common validation\n      if (!reservationData.server || !reservationData.urgency) {\n        alert('Server and Urgency are required.');\n        return;\n      }\n      \n      // Check if user is authenticated\n      if (!auth.currentUser) {\n        alert('You must be logged in to create reservations.');\n        return;\n      }\n      \n      // Check if username is available\n      if (!this.currentUsername) {\n        alert('Username is required but not available. Please refresh and try again.');\n        return;\n      }\n      \n      // Parse dates\n      let start, end;\n      \n      if (isNew) {\n        const validation = this.validateDateTimes(\n          this.startDateInput, \n          this.startTimeInput,\n          this.endDateInput,\n          this.endTimeInput\n        );\n        \n        if (!validation.valid) {\n          alert(validation.message);\n          return;\n        }\n        \n        start = validation.start;\n        end = validation.end;\n      } else {\n        start = this.parseDateTime(\n          reservationData.startDate, \n          reservationData.startTime\n        );\n        end = this.parseDateTime(\n          reservationData.endDate,\n          reservationData.endTime\n        );\n        \n        if (!start || !end) {\n          alert('Invalid date/time format.');\n          return;\n        }\n        \n        if (start >= end) {\n          alert('End time must be after start time.');\n          return;\n        }\n      }\n      \n      try {\n        if (isNew) {\n          // Create new reservation using safe transaction\n          const originalTitle = `${reservationData.server} (${reservationData.urgency})`;\n          \n          const reservationDoc = {\n            title: originalTitle,\n            start: this.toLocalOffsetISOString(start),\n            end: this.toLocalOffsetISOString(end),\n            server: reservationData.server,\n            urgency: reservationData.urgency,\n            note: reservationData.note || '',\n            username: this.currentUsername\n          };\n          \n          if (!this.currentUsername) {\n            throw new Error('Username is required but not available');\n          }\n          \n          if (!this.reservationsCollection) {\n            throw new Error('Reservations collection is not initialized');\n          }\n          \n          // Use transaction-based safe creation instead of regular addDoc\n          const newReservationId = await this.createReservationSafe(reservationDoc);\n          console.log('Safely created reservation with ID:', newReservationId);\n          \n          // Close form and cleanup FIRST\n          this.showReservationForm = false;\n          this.dragCreation.active = false;\n          \n          // Reset form after closing\n          this.newReservation = {\n            start: null,\n            end: null,\n            server: '',\n            urgency: '',\n            note: ''\n          };\n          this.startDateInput = '';\n          this.startTimeInput = '';\n          this.endDateInput = '';\n          this.endTimeInput = '';\n        } else {\n          // Update existing reservation - check for conflicts first\n          if (await this.checkConflictEfficient(\n            reservationData.server, \n            start, \n            end, \n            reservationData.urgency,\n            reservationData.id\n          )) {\n            alert('Conflict: overlapping on the same server, not all open to co-run.');\n            return;\n          }\n          \n          const originalTitle = `${reservationData.server} (${reservationData.urgency})`;\n          \n          const docRef = doc(firestore, 'reservations', reservationData.id);\n          await updateDoc(docRef, {\n            title: originalTitle,\n            server: reservationData.server,\n            start: this.toLocalOffsetISOString(start),\n            end: this.toLocalOffsetISOString(end),\n            urgency: reservationData.urgency,\n            note: reservationData.note || ''\n          });\n          \n          // Close form\n          this.showEditModal = false;\n          this.editingReservation = null;\n        }\n      } catch (error) {\n        console.error('=== FIREBASE ERROR DEBUG ===');\n        console.error(`Error ${isNew ? 'creating' : 'updating'} reservation:`, error);\n        console.error('Error name:', error.name);\n        console.error('Error message:', error.message);\n        console.error('Error code:', error.code);\n        console.error('Error stack:', error.stack);\n        console.error('Full error object:', JSON.stringify(error, Object.getOwnPropertyNames(error)));\n        \n        // Check authentication status\n        console.error('Auth status - currentUser:', auth.currentUser);\n        console.error('Auth status - currentUserEmail:', this.currentUserEmail);\n        console.error('Auth status - currentUsername:', this.currentUsername);\n        \n        // Handle different error types with user-friendly messages\n        if (error.message && error.message.includes('Conflict with reservation')) {\n          // This is a conflict detected by our transaction\n          alert(`Reservation conflict: ${error.message.split('Conflict with reservation by ')[1]}. Please choose a different time or make it co-run compatible.`);\n        } else if (error.code === 'permission-denied') {\n          alert('Permission denied: You may not have the required permissions to create reservations. Please check with your administrator.');\n        } else if (error.code === 'unauthenticated') {\n          alert('Authentication required: Please log out and log back in, then try again.');\n        } else if (error.message && error.message.includes('400')) {\n          alert('Firebase request failed (400): This is likely a permissions or authentication issue. Please try logging out and back in.');\n        } else {\n          alert(`Firebase ${isNew ? 'create' : 'update'} failed: ${error.message}`);\n        }\n        \n        // Keep modal open on error so user can fix the issue\n      }\n    },\n    \n    // Call the combined save function instead of separate functions\n    confirmReservation() {\n      this.saveReservation(true);\n    },\n    \n    confirmUpdate() {\n      this.saveReservation(false);\n    },\n\n    prefillDateTimeInputs(st,en){\n      this.startDateInput=this.formatMmmDdYyyy(st)\n      this.startTimeInput=this.formatHhMmAmPm(st)\n      this.endDateInput=this.formatMmmDdYyyy(en)\n      this.endTimeInput=this.formatHhMmAmPm(en)\n    },\n\n    applyDateOffsetForDate(val, which){\n      if(!val)return\n      const offset=parseInt(val)\n      if(isNaN(offset))return\n      const base = (which==='start')\n        ? this.parseDateTime(this.startDateInput, '12:00 PM')\n        : this.parseDateTime(this.endDateInput, '12:00 PM')\n      if(!base){\n        alert('Invalid date to shift.')\n        return\n      } \n      base.setDate(base.getDate()+offset)\n      if(which==='start'){\n        this.startDateInput=this.formatMmmDdYyyy(base)\n      }else{\n        this.endDateInput=this.formatMmmDdYyyy(base)\n      }\n    },\n\n    genTimeChoices(inputStr){\n      const base=this.parseDateTime('Jun 01, 2025', inputStr)\n      if(!base)return []\n      const arr=[]\n      for(let m=-12*60; m<=12*60; m+=15){\n        const dd=new Date(base)\n        dd.setMinutes(dd.getMinutes()+m)\n        const label=dd.toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit',hour12:true})\n        arr.push({ value:m, label:`${m} min => ${label}`})\n      }\n      return arr\n    },\n    applyTimeOffset(val, which){\n      if(!val)return \n      const offsetM=parseInt(val)\n      if(isNaN(offsetM))return\n      const base= this.parseDateTime('Jun 01, 2025', (which==='start'?this.startTimeInput:this.endTimeInput))\n      if(!base){\n        alert('Invalid time to shift.')\n        return\n      }\n      base.setMinutes(base.getMinutes()+offsetM)\n      const newLabel=base.toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit',hour12:true})\n      if(which==='start'){\n        this.startTimeInput=newLabel\n      } else {\n        this.endTimeInput=newLabel\n      }\n    },\n\n    cancelReservation(){\n      this.showReservationForm=false\n      this.dragCreation.active=false\n    },\n\n    // Update reservation when Update button is clicked\n    async confirmDelete(res){\n      this.showEditModal=false\n      if(confirm(`Delete reservation '${res.title}'?`)){\n        try{\n          const docRef=doc(firestore,'reservations',res.id)\n          await deleteDoc(docRef)\n          console.log('Reservation deleted.')\n        }catch(err){\n          console.error('Error deleting reservation:',err)\n        }\n      }\n      this.editingReservation=null\n    },\n    async promptChangePeriod(){\n      this.showEditModal=false\n      const ns=prompt('Enter new start time (YYYY-MM-DDTHH:MM)',this.editingReservation.start)\n      const ne=prompt('Enter new end time (YYYY-MM-DDTHH:MM)',this.editingReservation.end)\n      if(!ns||!ne)return\n      try{\n        const docRef=doc(firestore,'reservations',this.editingReservation.id)\n        await updateDoc(docRef,{\n          start:this.toLocalOffsetISOString(new Date(ns)),\n          end:this.toLocalOffsetISOString(new Date(ne))\n        })\n        console.log('server-type changed in local offset.')\n      }catch(err){\n        console.error('Error updating reservation period:',err)\n      }\n      this.editingReservation=null\n    },\n    cancelEdit(){\n      this.showEditModal=false\n      this.editingReservation=null\n    },\n\n    closeViewModal() {\n      this.showViewModal = false;\n      this.viewingReservation = null;\n    },\n\n    async loadServers(){\n      try {\n        this.serversList = await dailyCache.loadData('servers');\n        console.log('Loaded servers:', this.serversList.length);\n      } catch (err) {\n        console.error('Error loading servers:', err);\n        this.serversList = [];\n      }\n    },\n    loadReservations(){\n      this.reservationsCollection=collection(firestore,'reservations')\n      \n      // Optimized: Load reservations that overlap with current viewing week\n      // Need to get reservations that either:\n      // 1. Start during the week\n      // 2. End during the week  \n      // 3. Span across the entire week\n      // Since Firebase doesn't support OR queries directly, we query a wider range\n      const weekStart = new Date(this.weekStart);\n      weekStart.setHours(0, 0, 0, 0);\n      const weekEnd = new Date(weekStart);\n      weekEnd.setDate(weekEnd.getDate() + 7);\n      weekEnd.setHours(23, 59, 59, 999);\n      \n      // Query reservations that start before week end (to catch long reservations)\n      // Extend the query range to catch reservations that might span multiple weeks/months\n      const extendedStart = new Date(weekStart);\n      extendedStart.setDate(extendedStart.getDate() - 30); // Look back 30 days for very long reservations\n      \n      console.log(`Loading reservations for week: ${weekStart.toISOString()} to ${weekEnd.toISOString()}`);\n      console.log(`Extended query range: ${extendedStart.toISOString()} to ${weekEnd.toISOString()}`);\n      \n      const reservationsQuery = query(\n        this.reservationsCollection,\n        where('start', '>=', extendedStart.toISOString()),\n        where('start', '<', weekEnd.toISOString()),\n        orderBy('start', 'asc')\n      );\n      \n      this.unsubscribeReservations = onSnapshot(reservationsQuery,snap=>{\n        const rawReservations = snap.docs.map(d=>{\n          const dd=d.data()\n          // Set class names array\n          const classNames = [this.getUrgencyColorClass(dd.urgency)];\n          // Add my-reservation class if it's my reservation\n          if (dd.username === this.currentUsername) {\n            classNames.push('my-reservation');\n          }\n          \n          return {\n            id:d.id,\n            title: dd.title,  // Keep original title\n            start:dd.start,\n            end:dd.end,\n            server:dd.server,\n            urgency:dd.urgency,\n            note:dd.note,\n            username:dd.username,\n            className: classNames // Set class names array\n          }\n        })\n        \n        // Filter reservations that actually overlap with the current week\n        this.allReservations = rawReservations.filter(reservation => {\n          const resStart = new Date(reservation.start);\n          const resEnd = new Date(reservation.end);\n          \n          // Check if reservation overlaps with current week\n          // Overlap condition: reservation starts before week ends AND reservation ends after week starts\n          return resStart < weekEnd && resEnd > weekStart;\n        });\n        \n        console.log(`Filtered ${this.allReservations.length} reservations from ${rawReservations.length} total reservations for current week`);\n        \n        // Cleanup old reservations weekly (only on Sundays)\n        const today = new Date();\n        if (today.getDay() === 0) { // Sunday = 0\n          this.cleanupOldReservations();\n        }\n        \n        console.log('Fetched reservations:',this.allReservations)\n      },err=>console.error('Error fetching reservations:',err))\n    },\n\n    // Automatically delete reservations older than 3 months\n    async cleanupOldReservations() {\n      try {\n        const threeMonthsAgo = new Date();\n        threeMonthsAgo.setMonth(threeMonthsAgo.getMonth() - 3);\n        \n        const oldReservations = this.allReservations.filter(reservation => {\n          const reservationEnd = new Date(reservation.end);\n          return reservationEnd < threeMonthsAgo;\n        });\n        \n        if (oldReservations.length > 0) {\n          console.log(`Found ${oldReservations.length} old reservations to delete`);\n          \n          for (const reservation of oldReservations) {\n            const reservationRef = doc(firestore, 'reservations', reservation.id);\n            await deleteDoc(reservationRef);\n          }\n          \n          console.log(`Successfully deleted ${oldReservations.length} old reservations`);\n        }\n      } catch (error) {\n        console.error('Error cleaning up old reservations:', error);\n      }\n    },\n\n\n    openReservationForm() {\n      this.newReservation = {\n        start: null,\n        end: null,\n        server: '',\n        urgency: '',\n        note: ''\n      };\n      const now = new Date();\n      const snappedHours = this.snapHoursTo00_15_30_45(now.getHours() + now.getMinutes() / 60);\n      const snappedDate = new Date(now.getFullYear(), now.getMonth(), now.getDate(), Math.floor(snappedHours), Math.round((snappedHours - Math.floor(snappedHours)) * 60), 0, 0);\n      this.prefillDateTimeInputs(snappedDate, new Date(snappedDate.getTime() + 3600000));\n      this.showReservationForm = true;\n    },\n\n    \n\n    /** For server-type view */\n    getReservationsForServerAndDay(srv, dd){\n      return this.allReservations.filter(r=>{\n        if(r.server!==srv.name) return false\n        \n        const rs = new Date(r.start)\n        const re = new Date(r.end)\n        \n        const dayStart = new Date(dd)\n        dayStart.setHours(0, 0, 0, 0)\n        \n        const dayEnd = new Date(dd)\n        dayEnd.setHours(23, 59, 59, 999)\n        \n        // Check if reservation overlaps with the day\n        return (rs <= dayEnd && re > dayStart)\n      })\n    },\n    \n    getReservationStyle(r, dd){\n      const st=new Date(r.start)\n      const en=new Date(r.end)\n\n      const ds=new Date(dd); ds.setHours(0,0,0,0)\n      const de=new Date(dd); de.setHours(24,0,0,0)\n      const effS=st<ds?ds:st\n      const effE=en>de?de:en\n      \n      // Calculate start hour as before\n      const sh=effS.getHours()+effS.getMinutes()/60\n      \n      // Improved handling for end time across date boundaries (including month boundaries)\n      let eh = effE.getHours()+effE.getMinutes()/60\n      \n      // Check if effective end time extends beyond the current day\n      if (effE.getTime() >= de.getTime()) {\n        eh = 24  // If reservation extends to or beyond end of day, show until end of day\n      } else if (eh === 0 && effE > ds) {\n        // If end time is midnight but reservation extends beyond day start, treat as full day\n        eh = 24\n      }\n      \n      const leftP=(sh/24)*100\n      const wP=((eh-sh)/24)*100\n      \n      // Debug logging for cross-month reservations\n      if (st.getMonth() !== en.getMonth() || st.getDate() !== en.getDate()) {\n        console.log(`Cross-date reservation debugging:`, {\n          username: r.username,\n          server: r.server,\n          originalStart: r.start,\n          originalEnd: r.end,\n          viewingDay: dd.toDateString(),\n          effectiveStart: effS.toISOString(),\n          effectiveEnd: effE.toISOString(),\n          startHour: sh,\n          endHour: eh,\n          leftPercent: leftP,\n          widthPercent: wP\n        });\n      }\n      \n      return {left:`${leftP}%`, width:`${wP}%`}\n    },\n    \n    handleReservationClick(r){\n      const startDate = this.formatMmmDdYyyy(new Date(r.start));\n      const startTime = this.formatHhMmAmPm(new Date(r.start));\n      const endDate = this.formatMmmDdYyyy(new Date(r.end));\n      const endTime = this.formatHhMmAmPm(new Date(r.end));\n      \n      const reservationData = {\n        ...r,\n        startDate,\n        startTime,\n        endDate,\n        endTime\n      };\n      \n      // Check if it's current user's reservation\n      if (r.username === this.currentUsername) {\n        // Show edit modal if it's current user's reservation\n        this.editingReservation = null;\n        \n        this.$nextTick(() => {\n          this.editingReservation = reservationData;\n          this.showEditModal = true;\n        });\n      } else {\n        // Show view modal if it's another user's reservation\n        this.viewingReservation = null;\n        \n        this.$nextTick(() => {\n          this.viewingReservation = reservationData;\n          this.showViewModal = true;\n        });\n      }\n    },\n    \n    /** Drag creation functions */\n    handleTimelineContainerMousedown(dayDate,e){\n      if(e.target.closest('.reservation'))return\n      e.preventDefault()\n      this.startDragCreation(null,dayDate,e)\n    },\n    \n    handleReservationContainerMousedown(srv,dayDate,e){\n      if(e.target.closest('.reservation'))return\n      e.preventDefault()\n      this.startDragCreation(srv,dayDate,e)\n    },\n    \n    startDragCreation(server,day,e){\n      const rect=e.currentTarget.getBoundingClientRect()\n      this.dragCreation={\n        active:true,server,day,\n        startX:e.clientX, currentX:e.clientX,\n        containerLeft:rect.left, containerWidth:rect.width\n      }\n      window.addEventListener('mousemove', this.onDragCreationMove)\n      window.addEventListener('mouseup',this.onDragCreationEnd)\n    },\n    \n    onDragCreationMove(e) {\n      if (!this.dragCreation.active) return;\n\n      const { startX, containerLeft, containerWidth } = this.dragCreation;\n\n      const pointerX   = e.clientX - containerLeft;\n      const initialX   = startX - containerLeft;\n\n      let startFrac    = initialX / containerWidth;\n      let endFrac      = pointerX / containerWidth;\n      let hoursStart   = 24 * startFrac;\n      let hoursEnd     = 24 * endFrac;\n\n      hoursStart = this.snapHoursTo00_15_30_45(hoursStart);\n      hoursEnd   = this.snapHoursTo00_15_30_45(hoursEnd);\n\n      const newStartPx = (hoursStart / 24) * containerWidth;\n      const newEndPx   = (hoursEnd   / 24) * containerWidth;\n\n      const snappedLeftPx  = Math.min(newStartPx, newEndPx);\n      const snappedRightPx = Math.max(newStartPx, newEndPx);\n      const snappedWidth   = snappedRightPx - snappedLeftPx;\n\n      this.dragCreation.currentX = e.clientX;\n      this.dragCreation.previewLeft  = snappedLeftPx;\n      this.dragCreation.previewWidth = snappedWidth;\n      this.dragCreation.snappedStartPx = snappedLeftPx;\n      this.dragCreation.snappedEndPx   = snappedRightPx;\n    },\n    \n    onDragCreationEnd(){\n      if(!this.dragCreation.active)return\n      window.removeEventListener('mousemove',this.onDragCreationMove)\n      window.removeEventListener('mouseup',this.onDragCreationEnd)\n      const {startX, currentX, snappedStartPx,snappedEndPx,containerLeft,containerWidth,day,server}=this.dragCreation\n\n      const rawStartPx=Math.min(snappedStartPx,snappedEndPx)\n      const rawEndPx=Math.max(snappedStartPx,snappedEndPx)\n      const startFrac=(rawStartPx)/containerWidth\n      const endFrac=(rawEndPx)/containerWidth\n      if((startX - currentX) < 3 && (currentX - startX) < 3){\n        let px = startX - containerLeft\n        let fraction = px / containerWidth\n        let hours=24*fraction\n        hours=this.snapHoursTo00_15_30_45(hours)\n        const st=new Date(day)\n        st.setHours(Math.floor(hours), Math.round((hours-Math.floor(hours))*60),0,0)\n        const en=new Date(st.getTime()+30*60000)\n\n        const newStartPx = (hours / 24) * containerWidth;\n        this.dragCreation.previewLeft  = newStartPx;\n        this.dragCreation.previewWidth = (0.5 / 24) * containerWidth;\n\n        this.newReservation.server=server?server.name:''\n        this.newReservation.start=st\n        this.newReservation.end=en\n        this.newReservation.urgency=''\n        this.newReservation.note=''\n        this.prefillDateTimeInputs(st,en)\n        this.showReservationForm=true\n      }else{\n        let hs=24*startFrac\n        let he=24*endFrac\n        hs=this.snapHoursTo00_15_30_45(hs)\n        he=this.snapHoursTo00_15_30_45(he)\n        const finalS=new Date(day)\n        finalS.setHours(Math.floor(hs),Math.round((hs-Math.floor(hs))*60),0,0)\n        const finalE=new Date(day)\n        finalE.setHours(Math.floor(he),Math.round((he-Math.floor(he))*60),0,0)\n        this.newReservation.server=server?server.name:''\n        this.newReservation.start=finalS\n        this.newReservation.end=finalE\n        this.newReservation.urgency=''\n        this.newReservation.note=''\n        this.prefillDateTimeInputs(finalS, finalE)\n        this.showReservationForm=true\n      }\n    },\n    \n    getDragPreviewStyle(){\n      if(!this.dragCreation.active)return {}\n      if(this.dragCreation.previewLeft==null || this.dragCreation.previewWidth==null){\n        let left=Math.min(this.dragCreation.startX, this.dragCreation.currentX)-this.dragCreation.containerLeft\n        if(left<0)left=0\n        const width=Math.abs(this.dragCreation.currentX-this.dragCreation.startX)\n        return {left:left+'px', width:width+'px'}\n      }\n      return {\n        left:this.dragCreation.previewLeft+'px',\n        width:this.dragCreation.previewWidth+'px'\n      }\n    },\n\n    // Drag-related functions\n    handleDragOver(e, srv, day) {\n      if (!this.draggedReservation) return;\n      \n      e.preventDefault();\n      \n      const rect = e.currentTarget.getBoundingClientRect();\n      const px = e.clientX - rect.left;\n      let fraction = px / rect.width;\n      \n      let hours = 24 * fraction;\n      hours = this.snapHoursTo00_15_30_45(hours);\n      \n      const originalStart = new Date(this.draggedReservation.start);\n      const originalEnd = new Date(this.draggedReservation.end);\n      const duration = (originalEnd - originalStart) / (1000 * 60 * 60);\n\n      const leftPercent = (hours / 24) * 100;\n      const widthPercent = (duration / 24) * 100;\n      \n      this.dragPreviewPosition = {\n        active: true,\n        server: srv,\n        day: day,\n        left: leftPercent,\n        width: widthPercent,\n        serverIndex: this.filteredServers.findIndex(s => s.id === srv.id)\n      };\n    },\n    \n    isDraggingOver(srv, day) {\n      return this.dragPreviewPosition.active && \n             this.dragPreviewPosition.server.id === srv.id && \n             this.isSameDay(this.dragPreviewPosition.day, day);\n    },\n    \n    getDragGridPreviewStyle() {\n      if (!this.dragPreviewPosition.active) return {};\n      \n      return {\n        left: `${this.dragPreviewPosition.left}%`,\n        width: `${this.dragPreviewPosition.width}%`,\n        top: '5px',\n        height: '25px'\n      };\n    },\n    \n    // Modified to validate ownership in onDrop\n    async onDrop(e, srv, dayDate) {\n      if (!this.draggedReservation) return;\n      \n      // Check if current user is the owner of this reservation\n      if (this.draggedReservation.username !== this.currentUsername) {\n        alert(\"You can only modify your own reservations.\");\n        this.draggedReservation = null;\n        this.draggedOriginalServer = null;\n        this.dragPreviewPosition.active = false;\n        return;\n      }\n      \n      const rect = e.currentTarget.getBoundingClientRect();\n      const px = e.clientX - rect.left;\n      let fraction = px / rect.width;\n      let hours = 24 * fraction;\n      hours = this.snapHoursTo00_15_30_45(hours);\n      \n      const newStart = new Date(dayDate);\n      newStart.setHours(Math.floor(hours), Math.round((hours - Math.floor(hours)) * 60), 0, 0);\n      \n      const os = new Date(this.draggedReservation.start);\n      const oe = new Date(this.draggedReservation.end);\n      const dur = oe - os;\n      const newEnd = new Date(newStart.getTime() + dur);\n      \n      // Check for conflicts\n      if (await this.checkConflictEfficient(\n        srv.name, \n        newStart, \n        newEnd, \n        this.draggedReservation.urgency, \n        this.draggedReservation.id\n      )) {\n        alert('Conflict: overlapping on the same server, not all open to co-run.');\n        return;\n      }\n      \n      const updatedTitle = `${srv.name} (${this.draggedReservation.urgency})`;\n      \n      const updated = {\n        ...this.draggedReservation,\n        title: updatedTitle,\n        server: srv.name,\n        start: this.toLocalOffsetISOString(newStart),\n        end: this.toLocalOffsetISOString(newEnd)\n      };\n      \n      this.updateReservation(updated, true);\n      this.draggedReservation = null;\n      this.draggedOriginalServer = null;\n      this.dragPreviewPosition.active = false;\n    },\n\n    // Modified to check ownership before allowing custom drag\n    startCustomDrag(reservation, server, day, e) {\n      e.preventDefault();\n      e.stopPropagation();\n      \n      // Check if current user is the owner of this reservation\n      if (reservation.username !== this.currentUsername) {\n        // Just open the view modal instead of starting a drag\n        this.handleReservationClick(reservation);\n        return;\n      }\n      \n      const reservationElement = e.currentTarget;\n      const rect = reservationElement.getBoundingClientRect();\n      \n      // ...rest of the existing custom drag setup code...\n      const start = new Date(reservation.start);\n      const end = new Date(reservation.end);\n      const duration = (end - start) / (1000 * 60 * 60);\n      \n      this.customDragInitialOffset = e.clientX - rect.left;\n      \n      this.customDragActive = true;\n      this.customDragReservation = reservation;\n      this.customDragStartServer = server;\n      this.customDragCurrentServer = server;\n      this.customDragDay = day;\n      this.customDragWidth = duration;\n      this.customDragInitialRect = rect;\n      this.customDragStartTime = start;\n      \n      console.log('[Drag Start] Server:', server.name, 'Day:', this.formatMmmDdYyyy(day));\n      \n      this.isDragging = false;\n      this.dragStartX = e.clientX;\n      this.dragStartY = e.clientY;\n      \n      this.customDragPreviewStyle = {\n        position: 'fixed',\n        left: `${rect.left}px`,\n        top: `${rect.top}px`,\n        width: `${rect.width}px`,\n        height: `${rect.height}px`,\n        background: 'rgba(255, 165, 0, 0.7)',\n        border: '2px dashed #ff8c00',\n        zIndex: 9999,\n        pointerEvents: 'none',\n        borderRadius: '3px',\n        boxShadow: '0 2px 5px rgba(0,0,0,0.3)',\n        display: 'block',\n        transition: 'top 0.1s ease-out'\n      };\n      \n      window.addEventListener('mousemove', this.handleCustomDragMove);\n      window.addEventListener('mouseup', this.handleCustomDragEnd);\n      \n      this.lastMouseX = e.clientX;\n      this.lastMouseY = e.clientY;\n    },\n    \n    handleCustomDragMove(e) {\n      if (!this.customDragActive) return;\n      \n      const deltaX = Math.abs(e.clientX - this.dragStartX);\n      const deltaY = Math.abs(e.clientY - this.dragStartY);\n      \n      if (!this.isDragging && (deltaX > this.dragThreshold || deltaY > this.dragThreshold)) {\n        this.isDragging = true;\n        console.log('Dragging started');\n      }\n      \n      const daySections = document.querySelectorAll('.day-section');\n      let targetTimeline = null;\n      let targetDay = null;\n      let targetServer = null;\n      let minDistance = Infinity;\n      \n      daySections.forEach((daySection, dayIndex) => {\n        const timelineElement = daySection.querySelector('.timeline');\n        \n        if (timelineElement) {\n          const timelineRect = timelineElement.getBoundingClientRect();\n          \n          if (e.clientX >= timelineRect.left && e.clientX <= timelineRect.right) {\n            const relativeY = e.clientY - timelineRect.top;\n            const serverIndex = Math.floor(relativeY / this.rowHeight);\n            \n            if (serverIndex >= 0 && serverIndex < this.filteredServers.length) {\n              const serverRowTop = timelineRect.top + serverIndex * this.rowHeight;\n              const serverRowBottom = serverRowTop + this.rowHeight;\n              const distanceToRow = Math.min(\n                Math.abs(e.clientY - serverRowTop),\n                Math.abs(e.clientY - serverRowBottom)\n              );\n              \n              if (distanceToRow < minDistance) {\n                minDistance = distanceToRow;\n                targetTimeline = timelineElement;\n                targetDay = this.serverWeekDays[dayIndex].date;\n                targetServer = this.filteredServers[serverIndex];\n              }\n            }\n          }\n        }\n      });\n      \n      if (targetTimeline && targetServer) {\n        const rect = targetTimeline.getBoundingClientRect();\n        \n        let relativeX = e.clientX - rect.left;\n        if (relativeX < 0) relativeX = 0;\n        if (relativeX > rect.width) relativeX = rect.width;\n        \n        const fraction = relativeX / rect.width;\n        let hours = 24 * fraction;\n        hours = this.snapHoursTo00_15_30_45(hours);\n        \n        const serverIndex = this.filteredServers.findIndex(s => s.id === targetServer.id);\n        \n        const leftPercent = (hours / 24);\n        const newLeft = rect.left + leftPercent * rect.width;\n        const newTop = rect.top + (serverIndex >= 0 ? serverIndex * this.rowHeight : 0) + 5;\n        const newWidth = this.customDragWidth * rect.width / 24;\n        \n        this.customDragPreviewStyle = {\n          ...this.customDragPreviewStyle,\n          left: `${newLeft}px`,\n          top: `${newTop}px`,\n          width: `${newWidth}px`,\n          height: '25px',\n          transition: 'top 0.1s ease-out'\n        };\n        \n        if (this.customDragCurrentServer !== targetServer || \n            !this.isSameDay(this.customDragDay, targetDay)) {\n          console.log('[Drag Move] Changing to:', \n                     'Server:', targetServer.name,\n                     'Day:', this.formatMmmDdYyyy(targetDay));\n          \n          this.customDragCurrentServer = targetServer;\n          this.customDragDay = targetDay;\n        }\n      }\n      \n      this.lastMouseX = e.clientX;\n      this.lastMouseY = e.clientY;\n    },\n    \n    // Modified handleCustomDragEnd to check ownership again before saving\n    async handleCustomDragEnd() {\n      if (!this.customDragActive) return;\n      \n      window.removeEventListener('mousemove', this.handleCustomDragMove);\n      window.removeEventListener('mouseup', this.handleCustomDragEnd);\n      \n      // Verify ownership again as a safeguard\n      if (this.customDragReservation && \n          this.customDragReservation.username !== this.currentUsername) {\n        this.customDragActive = false;\n        this.customDragReservation = null;\n        this.customDragStartServer = null;\n        this.customDragCurrentServer = null;\n        this.customDragDay = null;\n        this.isDragging = false;\n        this.customDragInitialRect = null;\n        alert(\"You can only modify your own reservations.\");\n        return;\n      }\n      \n      const dragDistance = Math.sqrt(\n        Math.pow(this.lastMouseX - this.dragStartX, 2) + \n        Math.pow(this.lastMouseY - this.dragStartY, 2)\n      );\n      \n      // ...rest of the existing drag end handling...\n      if (dragDistance <= this.dragThreshold * 1) {\n        this.handleReservationClick(this.customDragReservation);\n      } \n      else if (this.isDragging && this.customDragReservation && \n               this.customDragDay && this.customDragCurrentServer) {\n        \n        console.log('[Drag End] Final position:', \n                   'Server:', this.customDragCurrentServer.name, \n                   'Day:', this.formatMmmDdYyyy(this.customDragDay));\n        \n        const dayIndex = this.serverWeekDays.findIndex(d => \n          this.isSameDay(d.date, this.customDragDay));\n          \n        const serverIndex = this.filteredServers.findIndex(s => \n          s.id === this.customDragCurrentServer.id);\n          \n        if (dayIndex >= 0 && serverIndex >= 0) {\n          const dayContainers = document.querySelectorAll('.day-section');\n          if (dayIndex < dayContainers.length) {\n            const timelineContainer = dayContainers[dayIndex].querySelector('.timeline');\n            \n            if (timelineContainer) {\n              const rect = timelineContainer.getBoundingClientRect();\n              \n              let relativeX = this.lastMouseX - rect.left;\n              if (relativeX < 0) relativeX = 0;\n              if (relativeX > rect.width) relativeX = rect.width;\n              \n              const fraction = relativeX / rect.width;\n              let hours = 24 * fraction;\n              hours = this.snapHoursTo00_15_30_45(hours);\n              \n              const newStart = new Date(this.customDragDay);\n              newStart.setHours(Math.floor(hours), Math.round((hours - Math.floor(hours)) * 60), 0, 0);\n              \n              const os = new Date(this.customDragReservation.start);\n              const oe = new Date(this.customDragReservation.end);\n              const dur = oe - os;\n              const newEnd = new Date(newStart.getTime() + dur);\n              \n              // Check for conflicts\n              if (await this.checkConflictEfficient(\n                this.customDragCurrentServer.name, \n                newStart, \n                newEnd, \n                this.customDragReservation.urgency,\n                this.customDragReservation.id\n              )) {\n                alert('Conflict: overlapping on the same server, not all open to co-run.');\n                this.customDragActive = false;\n                this.customDragReservation = null;\n                this.customDragStartServer = null;\n                this.customDragCurrentServer = null;\n                this.customDragDay = null;\n                this.isDragging = false;\n                this.customDragInitialRect = null;\n                return;\n              }\n              \n              const updatedTitle = `${this.customDragCurrentServer.name} (${this.customDragReservation.urgency})`;\n              \n              const updated = {\n                ...this.customDragReservation,\n                title: updatedTitle,\n                server: this.customDragCurrentServer.name,\n                start: this.toLocalOffsetISOString(newStart),\n                end: this.toLocalOffsetISOString(newEnd)\n              };\n              \n              const significantMove = dragDistance > this.dragThreshold * 4;\n              if (significantMove) {\n                this.updateReservationSilent(updated);\n              } else {\n                this.editingReservation = null;\n                \n                this.$nextTick(() => {\n                  this.editingReservation = {\n                    ...updated,\n                    startDate: this.formatMmmDdYyyy(newStart),\n                    startTime: this.formatHhMmAmPm(newStart),\n                    endDate: this.formatMmmDdYyyy(newEnd),\n                    endTime: this.formatHhMmAmPm(newEnd)\n                  };\n                  \n                  this.showEditModal = true;\n                });\n              }\n            }\n          }\n        }\n      }\n      \n      this.customDragActive = false;\n      this.customDragReservation = null;\n      this.customDragStartServer = null;\n      this.customDragCurrentServer = null;\n      this.customDragDay = null;\n      this.isDragging = false;\n      this.customDragInitialRect = null;\n    },\n\n    \n    // Format time range function\n    formatTimeRange(start, end) {\n      const startTime = start.toLocaleTimeString('en-US', {\n        hour: 'numeric',\n        minute: '2-digit',\n        hour12: true\n      });\n      const endTime = end.toLocaleTimeString('en-US', {\n        hour: 'numeric', \n        minute: '2-digit',\n        hour12: true\n      });\n      return `${startTime} - ${endTime}`;\n    },\n\n    // Check if reservation is mine\n    isMyReservation(reservation) {\n      return reservation.username === this.currentUsername;\n    },\n\n    // Add this new method to check if server has an attached device with a matching name\n    serverHasAttachedDeviceMatchingFilter(server, filter) {\n      // If no attached devices, return false\n      if (!server.attachedDevices || !server.attachedDevices.length) {\n        return false;\n      }\n      \n      // Check each attached device for a name match\n      return server.attachedDevices.some(deviceId => {\n        // Find the device object with this ID\n        const device = this.devicesList.find(d => d.id === deviceId);\n        \n        // If device found and has a name, check if it contains the filter string\n        return device && device.name && device.name.toLowerCase().includes(filter);\n      });\n    },\n    \n    // Load devices data for filtering with daily caching\n    async loadDevices() {\n      try {\n        this.devicesList = await dailyCache.loadData('devices');\n        console.log('Loaded devices:', this.devicesList.length);\n        return this.devicesList;\n      } catch (error) {\n        console.error('Error loading devices:', error);\n        this.devicesList = [];\n        return [];\n      }\n    },\n    \n    // Determine color class based on urgency\n    getUrgencyColorClass(urgency) {\n      if (!urgency) return 'urgency-default';\n      \n      const lowerUrgency = urgency.toLowerCase();\n      \n      if (lowerUrgency.includes('co-run')) {\n        return 'urgency-corun';\n      } else if (lowerUrgency.includes('may yield')) {\n        return 'urgency-exclusive-light';\n      } else if (lowerUrgency.includes('urgent')) {\n        return 'urgency-exclusive-dark';\n      } else {\n        return 'urgency-exclusive-medium';\n      }\n    },\n    // Reset filters - simplified to use only unifiedFilter\n    clearAllFilters() {\n      this.unifiedFilter = '';\n      this.serverFilter = ''; // For backward compatibility\n      this.deviceFilter = ''; // For backward compatibility\n      this.showOnlyFavorites = false;\n      \n      // Update URL to remove filter parameters\n      if (this.$route.query.server || this.$route.query.device) {\n        this.$router.replace({ path: this.$route.path });\n      }\n    },\n\n    // Format IP address for display\n    formatIp(ip) {\n      if (!ip) return 'N/A';\n      return Array.isArray(ip) ? ip.join(', ') : ip;\n    },\n    \n    // Format status text\n    formatStatus(status) {\n      if (!status) return 'Unknown';\n      return status.charAt(0).toUpperCase() + status.slice(1);\n    },\n    \n    // Get status color class\n    getStatusColor(status) {\n      if (!status) return 'status-red';\n      return status.toLowerCase() === 'on' ? 'status-green' : 'status-red';\n    },\n    \n    // Format field name for display (convert camelCase to Title Case)\n    formatFieldName(key) {\n      return key\n        .replace(/([A-Z])/g, ' $1')\n        .replace(/^./, str => str.toUpperCase());\n    },\n\n    // Parse BMC IPs (handles comma-separated IPs)\n    parseBmcIps(bmcIp) {\n      if (!bmcIp) return [];\n      // Split by comma and trim whitespace\n      return bmcIp.split(',').map(ip => ip.trim()).filter(ip => ip.length > 0);\n    },\n\n    // Password visibility methods\n    isPasswordVisible(type) {\n      return this.visiblePasswords.has(type);\n    },\n\n    togglePasswordVisibility(type) {\n      if (this.visiblePasswords.has(type)) {\n        this.visiblePasswords.delete(type);\n      } else {\n        this.visiblePasswords.add(type);\n        // Auto-hide password after 5 seconds\n        setTimeout(() => {\n          this.visiblePasswords.delete(type);\n          this.$forceUpdate();\n        }, 5000);\n      }\n    },\n\n    // Check if user has view permissions\n    hasViewPermissions() {\n      return isAdmin() || isUser();\n    },\n    \n    // Show server details modal\n    showServerDetails(server) {\n      this.activeServer = server;\n      \n      // Get attached devices\n      this.serverAttachedDevices = [];\n      if (server.attachedDevices && server.attachedDevices.length) {\n        this.serverAttachedDevices = server.attachedDevices.map(deviceId => {\n          const device = this.devicesList.find(d => d.id === deviceId);\n          return device || { id: deviceId, name: 'Unknown Device' };\n        });\n      }\n      \n      this.showServerDetailsModal = true;\n    },\n    \n    // Close server details modal\n    closeServerDetails() {\n      this.showServerDetailsModal = false;\n      this.activeServer = null;\n      this.serverAttachedDevices = [];\n      this.visiblePasswords.clear(); // Clear visible passwords when closing modal\n    },\n    \n    // Reserve the active server\n    reserveActiveServer() {\n      if (this.activeServer) {\n        this.$router.push({\n          path: '/calendar',\n          query: { server: this.activeServer.name }\n        });\n        this.unifiedFilter = this.activeServer.name;\n        this.closeServerDetails();\n      }\n    },\n    \n    // Filter server properties to get \"additional\" fields\n    getAdditionalFields(server) {\n      if (!server) return {};\n\n      const basicFields = [\n        'id', 'name', 'cpuType', 'ip', 'owner', 'sudoUser', 'sudoUserPassword',\n        'status', 'location', 'attachedDevices', 'cpuFreq', 'memorySlots',\n        'dimmType', 'numDimms', 'bmcIp', 'bmcUser', 'bmcPassword', 'ubuntuVersion'\n      ];\n\n      return Object.fromEntries(\n        Object.entries(server).filter(([key, value]) =>\n          !basicFields.includes(key) &&\n          value !== null &&\n          value !== undefined &&\n          value !== '' &&\n          !(Array.isArray(value) && value.length === 0) &&\n          !key.toLowerCase().includes('transfer')\n        )\n      );\n    },\n    // Helper function to determine CPU type group priority\n    getCpuTypeGroupIndex(cpuType) {\n      if (!cpuType) return 999; // Default/unknown goes last\n      \n      const cpuLower = cpuType.toLowerCase();\n      \n      // Green group - highest priority (0)\n      if (cpuLower.includes('spr') || cpuLower.includes('emr') || cpuLower.includes('gnr')) {\n        return 0;\n      }\n      \n      // Blue group - second priority (1)\n      if (cpuLower.includes('skx') || cpuLower.includes('icx') || cpuLower.includes('skl')) {\n        return 1;\n      }\n      \n      // Purple group - third priority (2)\n      if (cpuLower.includes('epyc')) {\n        return 2;\n      }\n      \n      // Orange group - fourth priority (3)\n      if (cpuLower.includes('hsw') || cpuLower.includes('bdw') || \n          cpuLower.includes('haswell') || cpuLower.includes('broadwell')) {\n        return 3;\n      }\n      \n      // Default case - lowest priority\n      return 4;\n    },\n    // Check if a server is in the favorites list\n    isServerFavorite(serverId) {\n      return this.favoriteServers.has(serverId);\n    },\n    \n    // Load favorites from Firestore\n    async loadFavorites() {\n      if (!this.currentUserEmail) return;\n      \n      try {\n        const usersRef = collection(firestore, 'authorizedUsers');\n        const q = query(usersRef, where(\"email\", \"==\", this.currentUserEmail));\n        \n        onSnapshot(q, (snapshot) => {\n          if (!snapshot.empty) {\n            const userDoc = snapshot.docs[0];\n            this.userDocId = userDoc.id;\n            \n            const userData = userDoc.data();\n            if (userData && userData.favorite_servers) {\n              this.favoriteServers = new Set(userData.favorite_servers);\n            } else {\n              this.favoriteServers = new Set();\n            }\n          }\n        });\n      } catch (error) {\n        console.error('Error loading favorites:', error);\n      }\n    },\n    \n  },\n  watch: {\n    startDateInput() {\n      this.startTimeChoices;\n      this.endTimeChoices;\n    },\n    startTimeInput() {\n      this.startTimeChoices;\n      this.endTimeChoices;\n    },\n    endDateInput() {\n      this.startTimeChoices;\n      this.endTimeChoices;\n    },\n    endTimeInput() {\n      this.startTimeChoices;\n      this.endTimeChoices;\n    },\n    'editingReservation.startDate'() {\n      if (this.editingReservation) this.validateEditTimes();\n    },\n    'editingReservation.startTime'() {\n      if (this.editingReservation) this.validateEditTimes();\n    },\n    'editingReservation.endDate'() {\n      if (this.editingReservation) this.validateEditTimes();\n    },\n    'editingReservation.endTime'() {\n      if (this.editingReservation) this.validateEditTimes();\n    },\n    showEditModal(val) {\n      if (val && this.editingReservation) {\n        this.$nextTick(() => {\n          this.validateEditTimes();\n        });\n      }\n    },\n    // Updated watcher to handle both server and device filters from URL and\n    // apply them to the unified filter\n    '$route.query'(newQuery) {\n      if (newQuery.server) {\n        this.unifiedFilter = newQuery.server;\n        this.selectedViewType = 'server'; \n      } else if (newQuery.device) {\n        this.unifiedFilter = newQuery.device;\n      }\n    }\n  },\n  mounted(){\n    // Clean up old cache entries on app startup\n    dailyCache.cleanupOldCache()\n    \n    // Load favorites if user is already authenticated\n    if (this.currentUserEmail) {\n      this.loadFavorites();\n    }\n  },\n  created(){\n    this.weekStart=new Date()\n    this.loadServers()\n    this.loadReservations()\n    this.loadDevices().then(() => {\n      // Check for server or device filter in URL query parameters\n      const serverName = this.$route.query.server;\n      const deviceName = this.$route.query.device;\n      \n      if (serverName) {\n        this.unifiedFilter = serverName;\n      } else if (deviceName) {\n        this.unifiedFilter = deviceName;\n      }\n    });\n    \n    \n    // Load favorites when user is authenticated\n    auth.onAuthStateChanged(async (user) => {\n      if (user) {\n        this.userRole = await getUserRole();\n        this.loadFavorites(); // Load favorites when authenticated\n      } else {\n        this.userRole = 'guest';\n        this.favoriteServers = new Set(); // Clear favorites when logged out\n      }\n    });\n  },\n  beforeUnmount() {\n    if (this.customDragActive) {\n      window.removeEventListener('mousemove', this.handleCustomDragMove);\n      window.removeEventListener('mouseup', this.handleCustomDragEnd);\n      if (this.dragAnimationFrame) {\n        cancelAnimationFrame(this.dragAnimationFrame);\n      }\n    }\n    \n    // Clean up Firebase listeners to prevent memory leaks\n    if (this.unsubscribeReservations) {\n      this.unsubscribeReservations();\n    }\n  }\n}\n</script>\n \n\n","import { render } from \"./ReservationCalendar.vue?vue&type=template&id=6c62afee\"\nimport script from \"./ReservationCalendar.vue?vue&type=script&lang=js\"\nexport * from \"./ReservationCalendar.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["$","call","iterate","aCallable","anObject","getIteratorDirect","iteratorClose","iteratorHelperWithoutClosingOnEarlyError","findWithoutClosingOnEarlyError","TypeError","target","proto","real","forced","find","predicate","this","error","record","counter","value","stop","IS_RECORD","INTERRUPTED","result","class","xmlns","viewBox","width","height","_createElementVNode","_hoisted_1","_createVNode","_component_router_link","to","title","_cache","fill","stroke","d","points","_hoisted_2","_hoisted_3","_hoisted_4","onClick","$event","$options","moveWeek","_hoisted_5","_toDisplayString","formatWeekRange","$data","weekStart","_hoisted_6","_hoisted_7","for","id","unifiedFilter","placeholder","currentUserEmail","_createElementBlock","showOnlyFavorites","_normalizeClass","_hoisted_9","clearAllFilters","_hoisted_11","filteredServers","length","serversList","_hoisted_12","_Fragment","_renderList","serverWeekDays","dayObj","key","date","today","isSameDay","Date","_hoisted_13","_hoisted_14","formatDayHeader","_hoisted_15","axisTimes","hour","formatAxisHour","_hoisted_16","_hoisted_17","srv","showServerDetails","_hoisted_19","getStatusColor","status","name","_hoisted_20","style","_normalizeStyle","currentTimeArrowStyle","rowHeight","onMousedown","handleTimelineContainerMousedown","_ctx","index","serverIndex","top","_withModifiers","handleReservationContainerMousedown","onDragover","handleDragOver","onDrop","toISOString","getReservationsForServerAndDay","res","getUrgencyColorClass","urgency","isMyReservation","draggable","startCustomDrag","getReservationStyle","_hoisted_25","username","dragCreation","active","day","server","getDragPreviewStyle","draggedReservation","isDraggingOver","getDragGridPreviewStyle","currentTimeLineStyle","customDragActive","customDragPreviewStyle","args","openReservationForm","showReservationForm","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","newReservation","required","disabled","sortedServersList","_hoisted_30","_hoisted_31","_hoisted_32","currentUsername","type","_hoisted_33","_hoisted_34","_hoisted_35","startDateInput","onChange","validateTimes","startDateChoices","choice","label","_hoisted_36","_hoisted_37","startTimeInput","startTimeChoices","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","endDateInput","endDateChoices","_hoisted_42","_hoisted_43","endTimeInput","endTimeChoices","_hoisted_44","_hoisted_45","note","_hoisted_46","confirmReservation","cancelReservation","showEditModal","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","editingReservation","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","startDate","validateEditTimes","editStartDateChoices","_hoisted_57","_hoisted_58","startTime","editStartTimeChoices","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","endDate","editEndDateChoices","_hoisted_63","_hoisted_64","endTime","editEndTimeChoices","_hoisted_65","_hoisted_66","_hoisted_67","confirmUpdate","cancelEdit","confirmDelete","showViewModal","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","viewingReservation","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_76","_hoisted_77","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","_hoisted_82","_hoisted_83","closeViewModal","showServerDetailsModal","closeServerDetails","_hoisted_84","_hoisted_85","activeServer","_hoisted_86","_hoisted_87","_hoisted_88","_hoisted_89","_hoisted_90","cpuType","_hoisted_91","_hoisted_92","formatIp","ip","_hoisted_93","_hoisted_94","owner","_hoisted_95","_hoisted_96","formatStatus","location","_hoisted_97","_hoisted_98","sudoUser","_hoisted_99","_hoisted_100","sudoUserPassword","hasViewPermissions","_hoisted_101","_hoisted_102","isPasswordVisible","togglePasswordVisibility","cx","cy","r","bmcIp","_hoisted_104","_hoisted_105","parseBmcIps","href","rel","_hoisted_106","bmcUser","_hoisted_107","_hoisted_108","bmcPassword","_hoisted_109","_hoisted_110","ubuntuVersion","_hoisted_112","_hoisted_113","serverAttachedDevices","_hoisted_114","_hoisted_115","device","_hoisted_116","_hoisted_117","_hoisted_118","_hoisted_119","cpuFreq","_hoisted_120","_hoisted_121","memorySlots","_hoisted_122","_hoisted_123","dimmType","_hoisted_124","_hoisted_125","numDimms","_hoisted_126","reserveActiveServer","components","data","allReservations","reservationsCollection","serverFilter","unsubscribeReservations","start","end","startDateOffset","startTimeOffset","endDateOffset","endTimeOffset","startX","currentX","containerLeft","containerWidth","previewLeft","previewWidth","draggedOriginalServer","dragPreviewPosition","left","customDragReservation","customDragStartServer","customDragCurrentServer","customDragDay","customDragInitialOffset","customDragWidth","customDragInitialRect","customDragStartTime","isDragging","dragStartX","dragStartY","dragThreshold","deviceFilter","favoriteServers","Set","userDocId","visiblePasswords","computed","auth","currentUser","email","split","filter","isServerFavorite","toLowerCase","includes","attachedDevices","devicesList","some","deviceId","attachedServer","sort","a","b","groupA","getCpuTypeGroupIndex","groupB","nameA","nameB","localeCompare","days","i","setDate","getDate","push","Array","from","_","genDateChoices","st","parseDateTime","en","arr","cur","getTime","formatHhMmAmPm","endRange","hasAdditionalProperties","Object","keys","getAdditionalFields","methods","checkConflictEfficient","serverName","newStart","newEnd","newUrgency","excludeId","conflictQuery","query","where","orderBy","snapshot","getDocs","potentialConflicts","docs","map","doc","console","log","ev","evStart","evEnd","existingUrg","newUrg","checkConflictMemory","sameServerEvents","createReservationSafe","reservationData","runTransaction","firestore","async","conflictSnapshot","conflicts","conflict","conflictStart","conflictEnd","conflictUrgency","Error","newDocRef","collection","transaction","set","toLocalOffsetISOString","offsetMin","getTimezoneOffset","sign","absolute","Math","abs","offsetHours","floor","offsetMins","pad","n","toString","padStart","year","getFullYear","month","getMonth","getHours","minute","getMinutes","second","getSeconds","offH","offM","h","toLocaleTimeString","hour12","formatMmmDdYyyy","toLocaleDateString","weekday","monthDay","addDays","startMonth","endMonth","startDay","endDay","startYear","endYear","getTimeIndicatorStyle","dayDate","now","hours","leftPercent","position","borderLeft","borderRight","borderTop","bottom","background","zIndex","boxShadow","dt","d1","d2","offset","newDate","reloadReservations","loadReservations","snapHoursTo00_15_30_45","totalMinutes","round","minutes","dateS","timeS","dateObj","timeParts","trim","time","period","Number","isNaN","upperPeriod","toUpperCase","setHours","err","inputStr","base","dd","validateDateTimes","valid","message","warn","alert","$forceUpdate","updateReservation","evt","directUpdate","docRef","updateData","undefined","updateDoc","updateReservationSilent","saveReservation","isNew","validation","originalTitle","reservationDoc","newReservationId","code","stack","JSON","stringify","getOwnPropertyNames","prefillDateTimeInputs","applyDateOffsetForDate","val","which","parseInt","genTimeChoices","m","setMinutes","applyTimeOffset","offsetM","newLabel","confirm","deleteDoc","promptChangePeriod","ns","prompt","ne","loadServers","dailyCache","loadData","weekEnd","extendedStart","reservationsQuery","onSnapshot","snap","rawReservations","classNames","className","reservation","resStart","resEnd","getDay","cleanupOldReservations","threeMonthsAgo","setMonth","oldReservations","reservationEnd","reservationRef","snappedHours","snappedDate","rs","re","dayStart","dayEnd","ds","de","effS","effE","sh","eh","leftP","wP","originalStart","originalEnd","viewingDay","toDateString","effectiveStart","effectiveEnd","startHour","endHour","widthPercent","handleReservationClick","$nextTick","e","closest","preventDefault","startDragCreation","rect","currentTarget","getBoundingClientRect","clientX","window","addEventListener","onDragCreationMove","onDragCreationEnd","pointerX","initialX","startFrac","endFrac","hoursStart","hoursEnd","newStartPx","newEndPx","snappedLeftPx","min","snappedRightPx","max","snappedWidth","snappedStartPx","snappedEndPx","removeEventListener","rawStartPx","rawEndPx","px","fraction","hs","he","finalS","finalE","duration","findIndex","s","os","oe","dur","updatedTitle","updated","stopPropagation","reservationElement","clientY","border","pointerEvents","borderRadius","display","transition","handleCustomDragMove","handleCustomDragEnd","lastMouseX","lastMouseY","deltaX","deltaY","daySections","document","querySelectorAll","targetTimeline","targetDay","targetServer","minDistance","Infinity","forEach","daySection","dayIndex","timelineElement","querySelector","timelineRect","right","relativeY","serverRowTop","serverRowBottom","distanceToRow","relativeX","newLeft","newTop","newWidth","dragDistance","sqrt","pow","dayContainers","timelineContainer","significantMove","formatTimeRange","serverHasAttachedDeviceMatchingFilter","loadDevices","lowerUrgency","$route","$router","replace","path","isArray","join","charAt","slice","formatFieldName","str","has","delete","add","setTimeout","isAdmin","isUser","clear","basicFields","fromEntries","entries","cpuLower","serverId","loadFavorites","usersRef","q","empty","userDoc","userData","favorite_servers","watch","newQuery","selectedViewType","mounted","cleanupOldCache","created","then","deviceName","onAuthStateChanged","user","userRole","getUserRole","beforeUnmount","dragAnimationFrame","cancelAnimationFrame","__exports__","render"],"sourceRoot":""}